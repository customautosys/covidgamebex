(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"117b":function(t,e,i){"use strict";var s=i("331b");i.n(s).a},1788:function(t,e,i){t.exports=i.p+"media/virus.mp3"},"17b5":function(t){t.exports=JSON.parse('{"frames":[{"filename":"antibody","frame":{"x":0,"y":0,"w":64,"h":64},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":64,"h":64},"sourceSize":{"w":64,"h":64}},{"filename":"boneMarrow","frame":{"x":64,"y":0,"w":64,"h":64},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":64,"h":64},"sourceSize":{"w":64,"h":64}},{"filename":"capillaries","frame":{"x":128,"y":0,"w":64,"h":64},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":64,"h":64},"sourceSize":{"w":64,"h":64}},{"filename":"covid","frame":{"x":192,"y":0,"w":64,"h":64},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":64,"h":64},"sourceSize":{"w":64,"h":64}},{"filename":"covid_text","frame":{"x":0,"y":64,"w":64,"h":64},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":64,"h":64},"sourceSize":{"w":64,"h":64}},{"filename":"covid_with_text","frame":{"x":64,"y":64,"w":64,"h":64},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":64,"h":64},"sourceSize":{"w":64,"h":64}},{"filename":"explosion","frame":{"x":128,"y":64,"w":64,"h":64},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":64,"h":64},"sourceSize":{"w":64,"h":64}},{"filename":"lymphocyte","frame":{"x":192,"y":64,"w":64,"h":64},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":64,"h":64},"sourceSize":{"w":64,"h":64}},{"filename":"mers","frame":{"x":0,"y":128,"w":64,"h":64},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":64,"h":64},"sourceSize":{"w":64,"h":64}},{"filename":"mers_text","frame":{"x":64,"y":128,"w":64,"h":64},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":64,"h":64},"sourceSize":{"w":64,"h":64}},{"filename":"mers_with_text","frame":{"x":128,"y":128,"w":64,"h":64},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":64,"h":64},"sourceSize":{"w":64,"h":64}},{"filename":"oxygen","frame":{"x":192,"y":128,"w":64,"h":64},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":64,"h":64},"sourceSize":{"w":64,"h":64}},{"filename":"phagocyte","frame":{"x":0,"y":192,"w":64,"h":64},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":64,"h":64},"sourceSize":{"w":64,"h":64}},{"filename":"pulmonaryArtery","frame":{"x":64,"y":192,"w":64,"h":64},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":64,"h":64},"sourceSize":{"w":64,"h":64}},{"filename":"redBloodCell","frame":{"x":128,"y":192,"w":64,"h":64},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":64,"h":64},"sourceSize":{"w":64,"h":64}},{"filename":"sars","frame":{"x":192,"y":192,"w":64,"h":64},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":64,"h":64},"sourceSize":{"w":64,"h":64}},{"filename":"sars_text","frame":{"x":0,"y":256,"w":64,"h":64},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":64,"h":64},"sourceSize":{"w":64,"h":64}},{"filename":"sars_with_text","frame":{"x":64,"y":256,"w":64,"h":64},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":64,"h":64},"sourceSize":{"w":64,"h":64}},{"filename":"slash","frame":{"x":128,"y":256,"w":64,"h":64},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":64,"h":64},"sourceSize":{"w":64,"h":64}}],"meta":{"app":"https://www.codeandweb.com/texturepacker","version":"1.0","image":"sprites.png","format":"RGBA8888","size":{"w":256,"h":512},"scale":"1","smartupdate":"$TexturePacker:SmartUpdate:a6970a6a18f5194cab5dd626aa99933d:b72d5cdfef4969dd975da23fffa2571a:1eabdf11f75e3a4fe3147baf7b5be24b$"}}')},"1a3c":function(t,e,i){t.exports=i.p+"media/building_pulmonary_artery.mp3"},"1ed8":function(t,e,i){t.exports=i.p+"media/erythrocyte_ready.mp3"},"331b":function(t,e,i){},"347e":function(t,e,i){t.exports=i.p+"media/phagocyte.mp3"},"3b32":function(t,e,i){t.exports=i.p+"media/bone_marrow_ready.mp3"},"3bed":function(t,e,i){t.exports=i.p+"media/music.mp3"},"3e86":function(t,e,i){"use strict";i.r(e);i("20d6");var s=i("22b4"),a=i.n(s),o=i("5128"),r=i("91cd"),n=i("e1a6"),l=o.a.extend({init:function(t){for(var e=a.a.me.state.current(),i=-e.vue.$store.state.CONSTANTS.BUILD_RESTRICTION_RADIUS;i<=e.vue.$store.state.CONSTANTS.BUILD_RESTRICTION_RADIUS;++i)for(var s=-e.vue.$store.state.CONSTANTS.BUILD_RESTRICTION_RADIUS;s<=e.vue.$store.state.CONSTANTS.BUILD_RESTRICTION_RADIUS;++s){var n=t.mapCoords.y+i,h=t.mapCoords.x+s;if(!(Math.pow(i,2)+Math.pow(s,2)>Math.pow(e.vue.$store.state.CONSTANTS.BUILD_RESTRICTION_RADIUS,2)||h<0||h>=t.tilemap.cols||n<0||n>=t.tilemap.rows)&&(Array.isArray(e.entityList[h+","+n])&&e.entityList[h+","+n].findIndex((function(t){return t instanceof l||t instanceof r.default}))>=0))throw"Cannot build Capillaries within a radius of "+e.vue.$store.state.CONSTANTS.BUILD_RESTRICTION_RADIUS+" of other Pulmonary Arteries or Capillaries!"}this.oxygenRequired=e.vue.$store.state.CONSTANTS.CAPILLARIES_OXYGEN_REQUIRED,t.image=e.vue.$store.state.sprites,t.region="capillaries",t.framewidth=e.vue.$store.state.CONSTANTS.TILE_SIZE,t.frameheight=e.vue.$store.state.CONSTANTS.TILE_SIZE,t.anchorPoint=new a.a.me.Vector2d(0,0),o.a.prototype.init.apply(this,[t]),e.vue.$set(this,"maxHealth",e.vue.$store.state.CONSTANTS.CAPILLARIES_MAX_HEALTH),this.constructionRate=e.vue.$store.state.CONSTANTS.CAPILLARIES_CONSTRUCTION_RATE,this.constructionSoundPlayed=!1},update:function(t){if(!this.constructed&&!this.constructionSoundPlayed){var e=a.a.me.state.current();a.a.me.audio.play("building_capillaries",!1,null,e.vue.$store.state.soundVolume/100),this.constructionSoundPlayed=!0}return o.a.prototype.update.apply(this,[t])},constructedEvent:function(){var t=a.a.me.state.current();a.a.me.state.current().capillaries.push(this),a.a.me.audio.play("capillaries_ready",!1,null,t.vue.$store.state.soundVolume/100)},click:function(){var t=this,e=a.a.me.state.current();if(!e.vue.$store.state.paused){if(this.constructed){var i=a.a.me.state.current().selected.filter((function(t){return t instanceof n.a&&t.hasOxygen}));if(i.length>0)return i.forEach((function(e){return e.setTarget(t)})),a.a.me.audio.play("depositing_oxygen",!1,null,e.vue.$store.state.soundVolume/100),void(this.goalNotification=e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION)}o.a.prototype.click.apply(this)}},draw:function(t){var e=a.a.me.state.current();e.toConstruct!==r.default&&e.toConstruct!==l||(t.setColor(new a.a.me.Color(0,0,0,.5)),t.fillEllipse(this.pos.x+this.width/2,this.pos.y+this.height/2,this.width*(e.vue.$store.state.CONSTANTS.BUILD_RESTRICTION_RADIUS+.5),this.height*(e.vue.$store.state.CONSTANTS.BUILD_RESTRICTION_RADIUS+.5))),o.a.prototype.draw.apply(this,[t])},die:function(){var t=a.a.me.state.current(),e=t.capillaries.indexOf(this);e>=0&&t.capillaries.splice(e,1),o.a.prototype.die.apply(this)}});e.default=l},"469a":function(t,e,i){"use strict";var s=i("f42d");i.n(s).a},"4ef6":function(t,e,i){t.exports=i.p+"media/building_erythrocyte.mp3"},5128:function(t,e,i){"use strict";i("0b21");var s=i("22b4"),a=i.n(s),o=i("e1a6"),r=i("df47");e.a=a.a.me.Sprite.extend({init:function(t){var e=this,i=a.a.me.state.current();if(this.oxygenRequired&&i.vue.$store.state.oxygen<this.oxygenRequired)throw"Not enough Oxygen to build this Organ!";if(i.vue.$set(this,"health",0),i.vue.$set(this,"maxHealth",100),i.vue.$set(this,"constructed",!1),this.entityList=i.entityList,this.constructionRate=1,this.lastUpdateTime=0,this.updated=!0,this.selectionStateChanged=!1,this.selected=!1,this.goalNotification=0,Array.isArray(i.entityList[t.mapCoords.x+","+t.mapCoords.y])&&i.entityList[t.mapCoords.x+","+t.mapCoords.y])throw"There is already an existing Organ there!";this.mapCoords=t.mapCoords,this.tilemap=t.tilemap;var s=this.tilemap.getRenderer().tileToPixelCoords(this.mapCoords.x,this.mapCoords.y),o=this.tilemap.getLayers()[0].getTile(s.x,s.y);if(1===o.tileId||16===o.tileId)throw"Organs can only be placed at the walls of blood vessels!";a.a.me.Sprite.prototype.init.apply(this,[s.x,s.y,t]),this.region=t.region,this.redBloodCells=Array.isArray(t.redBloodCells)?t.redBloodCells:[],this.redBloodCells.forEach((function(t){t.setTarget(e),t.constructing=e})),this.healthBar=new r.a(this),this.setOpacity(.2),Array.isArray(i.entityList[this.mapCoords.x+","+this.mapCoords.y])||(i.entityList[this.mapCoords.x+","+this.mapCoords.y]=[]),this.oxygenRequired&&i.vue.$store.commit("oxygen",i.vue.$store.state.oxygen-this.oxygenRequired),i.entityList[this.mapCoords.x+","+this.mapCoords.y].push(this),this.mouseIsDown=!1,a.a.me.game.world.addChild(this,1),this.isKinematic=!1,this.enemies=[],i.player.push(this),a.a.me.input.registerPointerEvent("pointerdown",this,(function(){e.mouseIsDown=!0})),a.a.me.input.registerPointerEvent("pointerleave",this,(function(){return e.mouseIsDown=!1})),a.a.me.input.registerPointerEvent("pointerup",this,(function(){return e.mouseIsDown&&e.click(),e.mouseIsDown=!1,!1})),a.a.me.game.world.addChild(this.slash=new a.a.me.Sprite(s.x,s.y,{image:i.vue.$store.state.sprites,region:"slash",framewidth:t.framewidth,frameheight:t.frameheight,anchorPoint:t.anchorPoint}),2),this.slash.setOpacity(0),this.slashTargetOpacity=0},update:function(t){var e=this;if(a.a.me.state.current().vue.$store.state.paused)return!1;if(this.lastUpdateTime+=t,!(this.lastUpdateTime<30)){if(this.lastUpdateTime-=30,!this.constructed&&this.health<this.maxHealth){var i=0;if(Array.isArray(this.redBloodCells)&&(i=this.redBloodCells.filter((function(t){return Math.sqrt(Math.pow(t.mapCoords.x-e.mapCoords.x,2)+Math.pow(t.mapCoords.y-e.mapCoords.y,2))<=Math.SQRT2})).length),i&&(this.health+=i*this.constructionRate,this.updated=!0,this.setOpacity(.2+.8*this.health/this.maxHealth),this.health>=this.maxHealth)){this.health=this.maxHealth,this.constructed=!0,this.constructedEvent();for(var s=this.redBloodCells.length;--s>=0;)this.redBloodCells[s].setTarget(null)}}var o=this.slash.getOpacity();this.slashTargetOpacity!==o?(this.slash.setOpacity(Math.abs(this.slashTargetOpacity-o)<.25?this.slashTargetOpacity:o+.25*Math.sign(this.slashTargetOpacity-o)),r=!0):1===this.slashTargetOpacity&&(this.slashTargetOpacity=0,r=!0);var r=a.a.me.Sprite.prototype.update.apply(this,[t]);return this.goalNotification&&(--this.goalNotification,r=!0),this.selectionStateChanged&&(this.selectionStateChanged=!1,r=!0),this.updated&&(this.updated=!1,r=!0),r}},addRedBloodCell:function(t){!t instanceof o.a||this.redBloodCells.indexOf(t)>-1||(Array.isArray(this.redBloodCells)||(this.redBloodCells=[]),this.redBloodCells.push(t),t.setTarget(this),t.constructing&&t.constructing.removeRedBloodCell(t),t.constructing=this)},removeRedBloodCell:function(t){if(Array.isArray(this.redBloodCells)){var e=this.redBloodCells.indexOf(t);e<0||(this.redBloodCells[e].constructing===this&&(this.redBloodCells[e].constructing=null),this.redBloodCells.splice(e,1))}},draw:function(t){a.a.me.Sprite.prototype.draw.apply(this,[t]);var e=a.a.me.state.current();this.selected&&(t.setLineWidth(1),t.setColor(new a.a.me.Color(255,255,255,1)),t.strokeEllipse(this.pos.x+this.width/2,this.pos.y+this.height/2,this.width/2,this.height/2)),this.goalNotification&&(t.setLineWidth(4),t.setColor(e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_COLOR),t.strokeLine(this.left-this.goalNotification,this.top-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION/2,this.left-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION,this.top-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION),t.strokeLine(this.left-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION/2,this.top-this.goalNotification,this.left-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION,this.top-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION),t.strokeLine(this.right+this.goalNotification,this.top-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION/2,this.right+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION,this.top-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION),t.strokeLine(this.right+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION/2,this.top-this.goalNotification,this.right+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION,this.top-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION),t.strokeLine(this.left-this.goalNotification,this.bottom+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION/2,this.left-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION,this.bottom+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION),t.strokeLine(this.left-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION/2,this.bottom+this.goalNotification,this.left-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION,this.bottom+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION),t.strokeLine(this.right+this.goalNotification,this.bottom+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION/2,this.right+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION,this.bottom+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION),t.strokeLine(this.right+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION/2,this.bottom+this.goalNotification,this.right+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION,this.bottom+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION))},click:function(){var t=this,e=a.a.me.state.current();if(!e.vue.$store.state.paused){if(!this.constructed){var i=e.selected.filter((function(t){return t instanceof o.a}));if(i.length>0)return i.forEach((function(e){return t.addRedBloodCell(e)})),void(this.goalNotification=e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION)}e.selectBuilding(this)}},attackedBy:function(t){if(this.slashTargetOpacity=1,this.health-=t.damageLower+Math.floor(Math.random()*(t.damageUpper-t.damageLower+1)),this.health<=0)return this.health=0,void this.die()},die:function(){var t=this,e=a.a.me.state.current(),i=this.mapCoords.x+","+this.mapCoords.y;if(Array.isArray(this.entityList[i])){var s=this.entityList[i].indexOf(this);s>=0&&this.entityList[i].splice(s,1)}var o=e.player.indexOf(this);o>=0&&e.player.splice(o,1),Array.isArray(this.enemies)&&this.enemies.forEach((function(e){e.target===t&&(e.setTarget(null),e.attacking=!1)})),this.selected&&e.selectedBuilding===this&&e.select(null),this.alwaysUpdate=!1,this.healthBar&&a.a.me.game.world.removeChild(this.healthBar),a.a.me.game.world.removeChild(this),a.a.me.game.world.removeChild(this.slash)},constructedEvent:function(){}})},"5e82":function(t,e,i){},"6d2c":function(t,e,i){t.exports=i.p+"media/building_phagocyte.mp3"},"72ba":function(t,e,i){t.exports=i.p+"media/building_lymphocyte.mp3"},"736b":function(t,e,i){},"74f0":function(t,e,i){t.exports=i.p+"media/pulmonary_artery_ready.mp3"},"807e":function(t,e,i){"use strict";var s=i("736b");i.n(s).a},"80aa":function(t,e,i){t.exports=i.p+"media/win.mp3"},"81bc":function(t,e,i){t.exports=i.p+"media/building_bone_marrow.mp3"},"892e":function(t,e,i){t.exports=i.p+"img/sprites.png"},"8d95":function(t,e,i){t.exports=i.p+"media/lose.mp3"},"90a1":function(t,e,i){t.exports=i.p+"media/breathe_in.mp3"},"91cd":function(t,e,i){"use strict";i.r(e);i("20d6");var s=i("22b4"),a=i.n(s),o=i("5128"),r=i("3e86"),n=i("e1a6"),l=o.a.extend({init:function(t){for(var e=a.a.me.state.current(),i=-e.vue.$store.state.CONSTANTS.BUILD_RESTRICTION_RADIUS;i<=e.vue.$store.state.CONSTANTS.BUILD_RESTRICTION_RADIUS;++i)for(var s=-e.vue.$store.state.CONSTANTS.BUILD_RESTRICTION_RADIUS;s<=e.vue.$store.state.CONSTANTS.BUILD_RESTRICTION_RADIUS;++s){var n=t.mapCoords.y+i,h=t.mapCoords.x+s;if(!(Math.pow(i,2)+Math.pow(s,2)>Math.pow(e.vue.$store.state.CONSTANTS.BUILD_RESTRICTION_RADIUS,2)||h<0||h>=t.tilemap.cols||n<0||n>=t.tilemap.rows)&&(Array.isArray(e.entityList[h+","+n])&&e.entityList[h+","+n].findIndex((function(t){return t instanceof r.default||t instanceof l}))>=0))throw"Cannot build Pulmonary Arteries within a radius of "+e.vue.$store.state.CONSTANTS.BUILD_RESTRICTION_RADIUS+" of other Pulmonary Arteries or Capillaries!"}this.oxygenRequired=e.vue.$store.state.CONSTANTS.PULMONARY_ARTERY_OXYGEN_REQUIRED,t.image=e.vue.$store.state.sprites,t.region="pulmonaryArtery",t.framewidth=e.vue.$store.state.CONSTANTS.TILE_SIZE,t.frameheight=e.vue.$store.state.CONSTANTS.TILE_SIZE,t.anchorPoint=new a.a.me.Vector2d(0,0),o.a.prototype.init.apply(this,[t]),e.vue.$set(this,"maxHealth",e.vue.$store.state.CONSTANTS.PULMONARY_ARTERY_MAX_HEALTH),this.constructionRate=e.vue.$store.state.CONSTANTS.PULMONARY_ARTERY_CONSTRUCTION_RATE,this.constructionSoundPlayed=!1},update:function(t){if(!this.constructed&&!this.constructionSoundPlayed){var e=a.a.me.state.current();a.a.me.audio.play("building_pulmonary_artery",!1,null,e.vue.$store.state.soundVolume/100),this.constructionSoundPlayed=!0}return o.a.prototype.update.apply(this,[t])},constructedEvent:function(){var t=a.a.me.state.current();t.pulmonaryArteries.push(this),a.a.me.audio.play("pulmonary_artery_ready",!1,null,t.vue.$store.state.soundVolume/100)},click:function(){var t=this,e=a.a.me.state.current();if(!e.vue.$store.state.paused){if(this.constructed){var i=a.a.me.state.current().selected.filter((function(t){return t instanceof n.a&&!t.hasOxygen}));if(i.length>0)return i.forEach((function(e){return e.setTarget(t)})),a.a.me.audio.play("gathering_oxygen",!1,null,e.vue.$store.state.soundVolume/100),void(this.goalNotification=10)}o.a.prototype.click.apply(this)}},draw:function(t){var e=a.a.me.state.current();e.toConstruct!==l&&e.toConstruct!==r.default||(t.setColor(new a.a.me.Color(0,0,0,.5)),t.fillEllipse(this.pos.x+this.width/2,this.pos.y+this.height/2,this.width*(e.vue.$store.state.CONSTANTS.BUILD_RESTRICTION_RADIUS+.5),this.height*(e.vue.$store.state.CONSTANTS.BUILD_RESTRICTION_RADIUS+.5))),o.a.prototype.draw.apply(this,[t])},die:function(){var t=a.a.me.state.current(),e=t.pulmonaryArteries.indexOf(this);e>=0&&t.pulmonaryArteries.splice(e,1),o.a.prototype.die.apply(this)}});e.default=l},"965b":function(t,e,i){t.exports=i.p+"media/capillaries_ready.mp3"},"9ca5":function(t,e,i){t.exports=i.p+"img/lose.png"},a374:function(t,e,i){t.exports=i.p+"media/attack.mp3"},a635:function(t,e,i){t.exports=i.p+"media/moving.mp3"},a972:function(t,e,i){t.exports=i.p+"media/hit.mp3"},ac53:function(t,e,i){t.exports=i.p+"media/breathe_out.mp3"},ae3b:function(t,e,i){t.exports=i.p+"img/win.png"},b4bb:function(t,e,i){"use strict";i("0b21");var s=i("967e"),a=i.n(s),o=(i("20d6"),i("96cf"),i("22b4")),r=i.n(o),n=i("1028"),l=i("df47");e.a=r.a.me.Container.extend({init:function(t){var e=r.a.me.state.current();this.tilemap=t.tilemap,this.mapCoords=t.mapCoords.clone(),this.path=[],this.lastUpdateTime=0;var i=this.tilemap.getRenderer().tileToPixelCoords(this.mapCoords.x,this.mapCoords.y);r.a.me.Container.prototype.init.apply(this,[i.x,i.y,t.framewidth,t.frameheight]),this.addChild(this.subContainer=new r.a.me.Container(t.framewidth,t.frameheight,0,0)),this.subContainer.addChild(this.sprite=new r.a.me.Sprite(-t.frameheight/2,-t.frameheight/2,{image:t.image,region:t.region,framewidth:t.framewidth,frameheight:t.frameheight,anchorPoint:t.anchorPoint})),this.region=t.region,this.subContainer.addChild(this.slash=new r.a.me.Sprite(-t.frameheight/2,-t.framewidth/2,{image:e.vue.$store.state.sprites,region:"slash",framewidth:t.framewidth,frameheight:t.frameheight,anchorPoint:t.anchorPoint})),this.slash.setOpacity(0),this.slashTargetOpacity=0,this.isKinematic=!1,this.entityList=r.a.me.state.current().entityList,Array.isArray(this.entityList[this.mapCoords.x+","+this.mapCoords.y])||(this.entityList[this.mapCoords.x+","+this.mapCoords.y]=[]),this.entityList[this.mapCoords.x+","+this.mapCoords.y].push(this),this.shotTime=0,this.speed=1,this.range=Math.SQRT2,this.healthBar=new l.a(this),this.repathAlreadyCalled=!1,this.retryPath=null,this.enemies=[],r.a.me.game.world.addChild(this,1)},setTarget:function(t){if(t!==this.target){if(this.repathAlreadyCalled=!1,!t||t===this)return this.target=null,this.lastTargetMapCoords=null,this.path.length=0,void(this.alwaysUpdate=!1);this.target=t,this.hostile(t)&&this.target.enemies.indexOf(this)<0&&this.target.enemies.push(this),this.lastTargetMapCoords=t.mapCoords.clone(),this.setGoal(t.mapCoords),this.alwaysUpdate=!0}},setGoal:function(t){var e=this;if(this.path.length=0,t&&(!this.target||!(Math.abs(this.mapCoords.x-this.target.mapCoords.x)<1&&Math.abs(this.mapCoords.y-this.target.mapCoords.y)<1||this.range>0&&Math.pow(this.mapCoords.x-this.target.mapCoords.x,2)+Math.pow(this.mapCoords.y-this.target.mapCoords.y,2)<=Math.pow(this.range,2)))){var i=this.tilemap.getLayers()[0],s=this.tilemap.getRenderer().tileToPixelCoords(t.x,t.y),o=null;if(i.getTile(s.x,s.y).tileId>1||Array.isArray(this.entityList[t.x+","+t.y])&&this.entityList[t.x+","+t.y].length>0){o=[];for(var l=1;o.length<=0;++l)for(var h=-l;h<=l;++h)if(h===-l||h===l)for(var u=-l;u<=l;++u)t.y+h<0||t.y+h>=this.tilemap.rows||t.x+u<0||t.x+u>=this.tilemap.cols||(s=this.tilemap.getRenderer().tileToPixelCoords(t.x+u,t.y+h),1!==i.getTile(s.x,s.y).tileId||Array.isArray(this.entityList[t.x+u+","+(t.y+h)])&&this.entityList[t.x+u+","+(t.y+h)].length>0||o.push({x:t.x+u,y:t.y+h}));else t.y+h>=0&&t.y+h<this.tilemap.rows&&t.x-l>=0&&(s=this.tilemap.getRenderer().tileToPixelCoords(t.x-l,t.y+h),1!==i.getTile(s.x,s.y).tileId||Array.isArray(this.entityList[t.x-l+","+(t.y+h)])&&this.entityList[t.x-l+","+(t.y+h)].length>0||o.push({x:t.x-l,y:t.y+h})),t.y+h>=0&&t.y+h<this.tilemap.rows&&t.x+l<this.tilemap.cols&&(s=this.tilemap.getRenderer().tileToPixelCoords(t.x+l,t.y+h),1!==i.getTile(s.x,s.y).tileId||Array.isArray(this.entityList[t.x+l+","+(t.y+h)])&&this.entityList[t.x+l+","+(t.y+h)].length>0||o.push({x:t.x+l,y:t.y+h}))}var d=this;this.path=Object(n.a)({id:this.mapCoords.x+","+this.mapCoords.y,x:this.mapCoords.x,y:this.mapCoords.y,cost:0,costEstimation:Math.sqrt(Math.pow(t.x-this.mapCoords.x,2)+Math.pow(t.y-this.mapCoords.y,2)),finish:t},a.a.mark((function e(s){var o,r,n,l,h,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=-1;case 1:if(!(o<=1)){e.next=26;break}r=-1;case 3:if(!(r<=1)){e.next=23;break}if(0!==o||0!==r){e.next=6;break}return e.abrupt("continue",20);case 6:if(!((n=s.y+o)<0||n>=d.tilemap.rows)){e.next=9;break}return e.abrupt("continue",20);case 9:if(!((l=s.x+r)<0||l>=d.tilemap.cols)){e.next=12;break}return e.abrupt("continue",20);case 12:if(h=d.tilemap.getRenderer().tileToPixelCoords(l,n),1===i.getTile(h.x,h.y).tileId){e.next=15;break}return e.abrupt("continue",20);case 15:if(u=l+","+n,!(Array.isArray(d.entityList[u])&&d.entityList[u].findIndex((function(t){return t!==d}))>=0)){e.next=18;break}return e.abrupt("continue",20);case 18:return e.next=20,{id:u,cost:s.cost+(0===o||0===r?1:Math.SQRT2),costEstimation:Math.sqrt(Math.pow(t.x-l,2)+Math.pow(t.y-n,2)),x:l,y:n,finish:t};case 20:++r,e.next=3;break;case 23:++o,e.next=1;break;case 26:case"end":return e.stop()}}),e)})),{isFinalNode:function(i){return i.x===t.x&&i.y===t.y||e.target&&Math.pow(e.target.mapCoords.x-i.x,2)+Math.pow(e.target.mapCoords.y-i.y,2)<=Math.pow(e.range,2)}}).map((function(t){return new r.a.me.Vector2d(t.x,t.y)})).reverse(),this.path.length>0&&(this.alwaysUpdate=!0)}},update:function(t){var e=this,i=r.a.me.state.current();if(i.vue.$store.state.paused)return!1;var s=r.a.me.Container.prototype.update.apply(this,[t]);if(this.lastUpdateTime+=t,this.lastUpdateTime<30)return s;if(this.lastUpdateTime-=30,!this.target||this.lastTargetMapCoords.x===this.target.mapCoords.x&&this.lastTargetMapCoords.y===this.target.mapCoords.y||(this.lastTargetMapCoords=this.target.mapCoords.clone(),this.retryPath=this.target.mapCoords.clone()),this.path.length>0){this.alwaysUpdate=!0;var a=this.tilemap.getRenderer().tileToPixelCoords(this.path[this.path.length-1].x,this.path[this.path.length-1].y);if(this.pos.x!==a.x||this.pos.y!==a.y){var o=Math.sign(a.x-this.pos.x),n=Math.sign(a.y-this.pos.y),l=Math.abs(a.x-this.pos.x),h=Math.abs(a.y-this.pos.y),u=Math.sqrt(Math.pow(l,2)+Math.pow(h,2)),d=o*Math.min(l,this.speed*l/u),c=n*Math.min(h,this.speed*h/u),p=this.pos.x+d,m=this.pos.y+c,g=this.tilemap.getRenderer().pixelToTileCoords(p+this.sprite.width/2,m+this.sprite.height/2);if(g.x=Math.floor(g.x),g.y=Math.floor(g.y),g.x!==this.mapCoords.x||g.y!==this.mapCoords.y)if(g=this.path[this.path.length-1].clone(),Array.isArray(this.entityList[g.x+","+g.y])&&this.entityList[g.x+","+g.y].findIndex((function(t){return t!==e}))>=0)(!this.repathAlreadyCalled||g.x===this.path[0].x&&g.y===this.path[0].y)&&(this.target?(this.lastTargetMapCoords=this.target.mapCoords.clone(),this.setGoal(this.target.mapCoords)):this.setGoal(this.path[0]),d=0,c=0,this.alwaysUpdate=!0,this.repathAlreadyCalled=!0);else{if(Array.isArray(this.entityList[this.mapCoords.x+","+this.mapCoords.y])){var T=this.entityList[this.mapCoords.x+","+this.mapCoords.y].indexOf(this);T>=0&&this.entityList[this.mapCoords.x+","+this.mapCoords.y].splice(T,1)}Array.isArray(this.entityList[g.x+","+g.y])||(this.entityList[g.x+","+g.y]=[]),this.entityList[g.x+","+g.y].push(this),this.mapCoords=g}this.translate(d,c),this.healthBar.updatePosition(),s=!0}else this.path.pop(),this.repathAlreadyCalled=!1,this.path.length<=0&&!this.target&&(this.alwaysUpdate=!1)}else if(!this.repathAlreadyCalled&&this.target&&Math.abs(this.mapCoords.x-this.target.mapCoords.x)>1&&Math.abs(this.mapCoords.y-this.target.mapCoords.y)>1&&(this.range<2||Math.pow(this.mapCoords.x-this.target.mapCoords.x,2)+Math.pow(this.mapCoords.y-this.target.mapCoords.y,2)>Math.pow(this.range,2))&&(this.lastTargetMapCoords=this.target.mapCoords.clone(),this.retryPath=this.target.mapCoords.clone(),this.repathAlreadyCalled=!0),this.retryPath&&(this.setGoal(this.retryPath),this.retryPath=null),this.path.length<=0){var f=this.tilemap.getRenderer().tileToPixelCoords(this.mapCoords.x,this.mapCoords.y);this.pos.x===f.x&&this.pos.y===f.y||(this.path.push(this.mapCoords),this.alwaysUpdate=!0)}this.range&&this.target&&this.shotInterval>=0&&(this.shotTime+=t,this.target&&this.target.pos&&this.hostile(this.target)&&this.shotTime>=this.shotInterval&&Math.pow(this.pos.x-this.target.pos.x,2)+Math.pow(this.pos.y-this.target.pos.y,2)<Math.pow(this.range*this.tilemap.tilewidth,2)&&(this.attack(),this.shotTime=0));var y=this.slash.getOpacity();return this.slashTargetOpacity!==y?(this.slash.setOpacity(Math.abs(this.slashTargetOpacity-y)<i.vue.$store.state.CONSTANTS.SLASH_OPACITY_ANIMATION_RATE?this.slashTargetOpacity:y+Math.sign(this.slashTargetOpacity-y)*i.vue.$store.state.CONSTANTS.SLASH_OPACITY_ANIMATION_RATE),s=!0):1===this.slashTargetOpacity&&(this.slashTargetOpacity=0,s=!0),s},hostile:function(t){return!1},attackedBy:function(t){r.a.me.state.current();if(this.health-=t.damageLower+Math.floor(Math.random()*(t.damageUpper-t.damageLower+1)),this.slashTargetOpacity=1,this.health<=0)return this.health=0,void this.die()},die:function(){var t=this,e=this.mapCoords.x+","+this.mapCoords.y;if(Array.isArray(this.entityList[e])){var i=this.entityList[e].indexOf(this);i>=0&&this.entityList[e].splice(i,1)}if(Array.isArray(this.enemies)&&this.enemies.forEach((function(e){e.target===t&&(e.setTarget(null),e.attacking=!1)})),this.selected){var s=r.a.me.state.current();1===s.selected.length&&s.selected[0]===this?s.select(null):s.select(s.selected.filter((function(e){return e!==t})))}this.alwaysUpdate=!1,this.healthBar&&r.a.me.game.world.removeChild(this.healthBar),r.a.me.game.world.removeChild(this)},draw:function(t){r.a.me.Container.prototype.draw.apply(this,[t]),this.subContainer.draw(t)}})},c061:function(t,e,i){t.exports=i.p+"media/ranged.mp3"},c7b9:function(t,e,i){t.exports=i.p+"media/gathering_oxygen.mp3"},cdea:function(t,e,i){"use strict";var s=i("22b4"),a=i.n(s),o=i("b4bb");e.a=o.a.extend({init:function(t){var e=this,i=a.a.me.state.current();if(this.oxygenRequired&&i.vue.$store.state.oxygen<this.oxygenRequired)throw"Not enough Oxygen to build this Blood Cell!";o.a.prototype.init.apply(this,[t]),i.vue.$store.commit("oxygen",i.vue.$store.state.oxygen-this.oxygenRequired),this.selected=!1,this.selectionStateChanged=!1,this.creationRate=t.creationRate?t.creationRate:1,i.player.push(this),a.a.me.input.registerPointerEvent("pointerdown",this,(function(){return e.mouseIsDown=!0})),a.a.me.input.registerPointerEvent("pointerleave",this,(function(){return e.mouseIsDown=!1})),a.a.me.input.registerPointerEvent("pointerup",this,(function(){return e.mouseIsDown&&e.click(),e.mouseIsDown=!1,!1}))},click:function(){var t=a.a.me.state.current();t.vue.$store.state.paused||t.select(this)},update:function(t){if(a.a.me.state.current().vue.$store.state.paused)return!1;var e=o.a.prototype.update.apply(this,[t]);return this.selectionStateChanged&&(this.selectionStateChanged=!1,e=!0),e},draw:function(t){o.a.prototype.draw.apply(this,[t]),this.selected&&(t.setLineWidth(1),t.setColor(new a.a.me.Color(255,255,255,1)),t.strokeEllipse(0,0,this.sprite.width/2,this.sprite.height/2))},die:function(){var t=a.a.me.state.current(),e=t.player.indexOf(this);e>=0&&t.player.splice(e,1),o.a.prototype.die.apply(this)}})},cefe:function(t,e,i){t.exports=i.p+"media/depositing_oxygen.mp3"},d1b3:function(t,e,i){"use strict";i.r(e);var s=i("967e"),a=i.n(s),o=(i("96cf"),i("fa84")),r=i.n(o),n=(i("551c"),i("06db"),i("22b4")),l=i.n(n),h=i("a26a"),u=i("4386"),d=(i("ac6a"),i("cadf"),i("456d"),i("7514"),i("a481"),i("ae3b")),c=i.n(d),p=i("9ca5"),m=i.n(p),g={data:function(){return{showDialog:!1,currentState:null,picture:"",backgroundStyle:{},autoPost:!0}},methods:{show:function(){this.currentState=l.a.me.state.current(),this.picture=this.currentState.player.length<=0?m.a:c.a,l.a.me.audio.play(this.currentState.player.length<=0?"lose":"win",!1,null,this.currentState.vue.$store.state.soundVolume/100),this.backgroundStyle.background=this.currentState.player.length<=0?"rgba(255,0,0,0.5)":"rgba(0,255,0,0.5)",this.autoPost=!0,this.showDialog=!0,this.currentState.tutorialVars.tutorialEndedResolve&&(this.currentState.tutorialVars.tutorialEndedResolve(),localStorage.setItem("skipTutorial","true")),this.$forceUpdate()},carryOn:function(){var t=this;return r()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.showDialog=!1,!(t.$store.state.difficulty<0)){e.next=5;break}t.$q.dialog({message:(t.currentState.player.length>0?"Congratulations, you passed the tutorial!":"Unfortunately, you failed the tutorial.")+" You can play it again by selecting Tutorial on the main menu."}).onOk(r()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.currentState.vue.$refs.dialog_ad.show();case 2:t.$router.replace("/menu");case 3:case"end":return e.stop()}}),e)})))),e.next=8;break;case 5:return e.next=7,t.currentState.vue.$refs.dialog_ad.show();case 7:t.$router.replace("/menu");case 8:case"end":return e.stop()}}),e)})))()},submitHighScore:function(){var t=this;return r()(a.a.mark((function e(){var i,s,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.showDialog=!1,i=Math.floor(t.currentState.vue.$refs.toolbar.timeElapsed/36e5),s=Math.floor(t.currentState.vue.$refs.toolbar.timeElapsed/1e3%3600/60),o=Math.floor(t.currentState.vue.$refs.toolbar.timeElapsed/1e3%60),h.a.getInstance().state={search:"?submit_high_score",difficulty:t.$store.state.difficulty,timeElapsed:(i<10?"0":"")+i+":"+(s<10?"0":"")+s+":"+(o<10?"0":"")+o,oxygenRemaining:t.$store.state.oxygen,unitsRemaining:t.currentState.player.length,autoPost:t.autoPost},t.$store.state.user?t.$router.replace("/submit_high_score"):t.$router.replace("/login");case 6:case"end":return e.stop()}}),e)})))()}}},T=(i("469a"),i("2877")),f=Object(T.a)(g,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-dialog",{attrs:{persistent:""},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[i("q-card",{style:t.backgroundStyle},[i("q-card-section",{staticClass:"flex justify-evenly items-center"},[i("img",{attrs:{src:t.picture}})]),i("q-card-section",{staticClass:"flex justify-evenly items-center"},[t.$store.state.difficulty>=0&&t.currentState&&t.currentState.player&&t.currentState.player.length>0?i("q-checkbox",{staticClass:"autoPost",attrs:{size:"xs",label:"Automatically post to the LinkedIn or Twitter account which I use to sign in (if you don't check this, you will be shown an ad after your score is posted)."},model:{value:t.autoPost,callback:function(e){t.autoPost=e},expression:"autoPost"}}):t._e()],1),i("q-card-actions",{attrs:{align:"center"}},[t.$store.state.difficulty>=0&&t.currentState&&t.currentState.player&&t.currentState.player.length>0?i("q-btn",{attrs:{"no-caps":"",dense:"",outline:"",color:"white","text-color":"white",size:"xs"},on:{click:t.carryOn}},[t._v("No thanks (you will be shown an ad)")]):t._e(),t.$store.state.difficulty>=0&&t.currentState&&t.currentState.player&&t.currentState.player.length>0?i("q-btn",{attrs:{color:"red-10","text-color":"white",glossy:"",push:"","no-caps":"",size:"lg"},on:{click:t.submitHighScore}},[t._v(t._s(t.$store.state.user?"Submit":"Login & submit")+" high score >")]):i("q-btn",{attrs:{color:"red-10","text-color":"white",glossy:"",push:"","no-caps":""},on:{click:t.carryOn}},[t._v("Continue >")])],1)],1)],1)}),[],!1,null,"0b62d17d",null).exports,y=i("5128"),v=i("e1a6"),N=i("4db1"),S=i.n(N),C=i("cdea"),A=(i("0b21"),i("b4bb")),O=A.a.extend({init:function(t){var e=this,i=l.a.me.state.current();A.a.prototype.init.apply(this,[t]),this.selected=!1,this.selectionStateChanged=!1,this.attackNotification=0,this.setOpacity(0),i.viruses.push(this),this.subContainer.addChild(this.explosion=new l.a.me.Sprite(-t.frameheight/2,-t.framewidth/2,{image:i.vue.$store.state.sprites,region:"explosion",framewidth:t.framewidth,frameheight:t.frameheight,anchorPoint:t.anchorPoint})),this.explosion.setOpacity(0),this.explosionTargetOpacity=0,this.body=new l.a.me.Body(this,[new l.a.me.Ellipse(this.sprite.width/2,this.sprite.height/2,this.sprite.width,this.sprite.height)]),this.body.collisionType=l.a.me.collision.types.ENEMY_OBJECT,this.body.setCollisionMask(l.a.me.collision.types.PROJECTILE_OBJECT),l.a.me.input.registerPointerEvent("pointerdown",this,(function(){return e.mouseIsDown=!0})),l.a.me.input.registerPointerEvent("pointerleave",this,(function(){return e.mouseIsDown=!1})),l.a.me.input.registerPointerEvent("pointerup",this,(function(){return e.mouseIsDown&&e.click(),e.mouseIsDown=!1,!1})),this.findRandomTarget()},click:function(){var t=l.a.me.state.current();t.vue.$store.state.paused||(t.attack(this)?(this.attackNotification=t.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION,l.a.me.audio.play("attack",!1,null,t.vue.$store.state.soundVolume/100)):t.select(this))},update:function(t){var e=l.a.me.state.current();if(e.vue.$store.state.paused)return!1;var i=!1;if(this.selectionStateChanged&&(i=!0,this.selectionStateChanged=!1),this.lastUpdateTime+t>=30){this.attackNotification&&(--this.attackNotification,i=!0);var s=this.getOpacity();if(s<1&&this.setOpacity(Math.min(1,s+e.vue.$store.state.CONSTANTS.ATTACKABLE_OPACITY_ANIMATION_RATE)),this.attacking&&(this.sprite.rotate(e.vue.$store.state.CONSTANTS.UNIT_ROTATION_RATE),this.target&&this.target.pos&&this.pos&&Math.pow(this.target.pos.x-this.pos.x,2)+Math.pow(this.target.pos.y-this.pos.y,2)>Math.pow(this.range*this.width,2)&&(this.attacking=!1),i=!0),(!this.target||!this.target.pos||!this.attacking&&this.path.length<=0&&Math.pow(this.target.pos.x-this.pos.x,2)+Math.pow(this.target.pos.y-this.pos.y,2)>Math.pow(this.range*this.width,2))&&(this.findRandomTarget(),i=!0),s=this.explosion.getOpacity(),this.explosionTargetOpacity!==s){var a=Math.abs(this.explosionTargetOpacity-s)<e.vue.$store.state.CONSTANTS.EXPLOSION_OPACITY_ANIMATION_RATE?this.explosionTargetOpacity:s+Math.sign(this.explosionTargetOpacity-s)*e.vue.$store.state.CONSTANTS.EXPLOSION_OPACITY_ANIMATION_RATE;this.explosion.setOpacity(a),1===this.explosionTargetOpacity&&(this.explosion.currentTransform.identity(),this.explosion.scale(a)),i=!0}else 1===this.explosionTargetOpacity&&(this.explosionTargetOpacity=0,i=!0)}return i=A.a.prototype.update.apply(this,[t])||i},attack:function(){var t=l.a.me.state.current();this.attacking=!0,l.a.me.audio.play("virus",!1,null,t.vue.$store.state.soundVolume/100),this.target.attackedBy(this)},attackedBy:function(t){var e=1;t instanceof x&&(this.explosionTargetOpacity=1,e=this.slashTargetOpacity),A.a.prototype.attackedBy.apply(this,[t]),this.slashTargetOpacity=e,this.health>0&&this.setTarget(t)},draw:function(t){A.a.prototype.draw.apply(this,[t]);var e=l.a.me.state.current();if(this.attacking&&this.target&&this.target.pos&&this.pos&&(t.setLineWidth(1),t.setColor(e.vue.$store.state.CONSTANTS.ATTACK_LINE_COLOR),t.strokeLine(0,0,this.target.pos.x-this.pos.x,this.target.pos.y-this.pos.y)),this.attackNotification){t.setLineWidth(4),t.setColor(e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_COLOR);var i=.5*-this.sprite.width,s=.5*-this.sprite.height,a=.5*this.sprite.width,o=.5*this.sprite.height;t.strokeLine(i-this.attackNotification,s-this.attackNotification+e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION/2,i-this.attackNotification+e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION,s-this.attackNotification+e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION),t.strokeLine(i-this.attackNotification+e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION/2,s-this.attackNotification,i-this.attackNotification+e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION,s-this.attackNotification+e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION),t.strokeLine(a+this.attackNotification,s-this.attackNotification+e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION/2,a+this.attackNotification-e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION,s-this.attackNotification+e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION),t.strokeLine(a+this.attackNotification-e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION/2,s-this.attackNotification,a+this.attackNotification-e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION,s-this.attackNotification+e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION),t.strokeLine(i-this.attackNotification,o+this.attackNotification-e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION/2,i-this.attackNotification+e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION,o+this.attackNotification-e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION),t.strokeLine(i-this.attackNotification+e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION/2,o+this.attackNotification,i-this.attackNotification+e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION,o+this.attackNotification-e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION),t.strokeLine(a+this.attackNotification,o+this.attackNotification-e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION/2,a+this.attackNotification-e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION,o+this.attackNotification-e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION),t.strokeLine(a+this.attackNotification-e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION/2,o+this.attackNotification,a+this.attackNotification-e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION,o+this.attackNotification-e.vue.$store.state.CONSTANTS.ATTACK_NOTIFICATION_DURATION)}this.selected&&(t.setLineWidth(1),t.setColor(new l.a.me.Color(255,255,255,1)),t.strokeEllipse(0,0,this.sprite.width/2,this.sprite.height/2))},setTarget:function(t){A.a.prototype.setTarget.apply(this,[t]),t||(this.attacking=!1,this.findRandomTarget())},setGoal:function(t){this.attacking=!1,A.a.prototype.setGoal.apply(this,[t])},hostile:function(t){return t instanceof C.a||t instanceof y.a},die:function(){var t=l.a.me.state.current(),e=t.viruses.indexOf(this);e>=0&&t.viruses.splice(e,1),this.body.setCollisionMask(l.a.me.collision.types.NO_OBJECT),A.a.prototype.die.apply(this)},findRandomTarget:function(){var t=this,e=l.a.me.state.current();if(!(e.player.length<=0)){var i=e.player.map((function(e){return{entity:e,distanceSquared:Math.pow(e.mapCoords.y-t.mapCoords.y,2)+Math.pow(e.mapCoords.x-t.mapCoords.x,2)}})),s=Math.min.apply(Math,S()(i.map((function(t){return t.distanceSquared}))));(i=i.filter((function(t){return t.distanceSquared<=s}))).length>0&&this.setTarget(i[Math.floor(Math.random()*i.length)].entity),this.path.length<=0&&this.setTarget(e.player[Math.floor(Math.random()*e.player.length)])}}}),w=l.a.me.Container.extend({init:function(t){var e=l.a.me.state.current();l.a.me.Container.prototype.init.apply(this,[t.pos.x,t.pos.y,e.vue.$store.state.CONSTANTS.TILE_SIZE,e.vue.$store.state.CONSTANTS.TILE_SIZE]),this.addChild(this.subContainer=new l.a.me.Container(1.5*e.vue.$store.state.CONSTANTS.TILE_SIZE,1.5*e.vue.$store.state.CONSTANTS.TILE_SIZE,e.vue.$store.state.CONSTANTS.TILE_SIZE,e.vue.$store.state.CONSTANTS.TILE_SIZE)),this.subContainer.addChild(this.sprite=new l.a.me.Sprite(-e.vue.$store.state.CONSTANTS.TILE_SIZE/2,-e.vue.$store.state.CONSTANTS.TILE_SIZE/2,{image:e.vue.$store.state.sprites,region:"antibody",framewidth:e.vue.$store.state.CONSTANTS.TILE_SIZE,frameheight:e.vue.$store.state.CONSTANTS.TILE_SIZE,anchorPoint:new l.a.me.Vector2d(0,0)})),this.lymphocyte=t,this.speed=e.vue.$store.state.CONSTANTS.PROJECTILE_SPEED,this.lastUpdateTime=0,this.target=null,this.setOpacity(0),this.targetOpacity=1,this.opacityAnimationRate=e.vue.$store.state.CONSTANTS.PROJECTILE_OPACITY_ANIMATION_RATE,this.distanceMoved=0,this.alreadyAttacked=!1,this.target=t.target,this.xdifference=this.target.pos.x-this.lymphocyte.pos.x,this.ydifference=this.target.pos.y-this.lymphocyte.pos.y,this.distance=Math.sqrt(Math.pow(this.xdifference,2)+Math.pow(this.ydifference,2)),this.body=new l.a.me.Body(this,[new l.a.me.Ellipse(this.sprite.width/2,this.sprite.height/2,this.sprite.width,this.sprite.height)]),this.body.collisionType=l.a.me.collision.types.PROJECTILE_OBJECT,this.body.setCollisionMask(l.a.me.collision.types.ENEMY_OBJECT),this.alwaysUpdate=!0,l.a.me.game.world.addChild(this,2)},update:function(t){var e=l.a.me.state.current();if(e.vue.$store.state.paused)return!1;var i=this.getOpacity();return this.targetOpacity<=0&&i<0?(l.a.me.game.world.removeChild(this),!1):(this.lastUpdateTime+=t,!(this.lastUpdateTime<30)&&(this.lastUpdateTime-=30,this.targetOpacity!==i&&this.setOpacity(Math.abs(this.targetOpacity-i)<this.opacityAnimationRate?this.targetOpacity:i+this.opacityAnimationRate*Math.sign(this.targetOpacity-i)),this.distanceMoved<this.lymphocyte.range*this.sprite.width&&!this.alreadyAttacked&&(this.sprite.rotate(e.vue.$store.state.CONSTANTS.PROJECTILE_ROTATION_ANGLE),this.translate(this.speed/this.distance*this.xdifference,this.speed/this.distance*this.ydifference),this.distanceMoved+=this.speed,l.a.me.collision.check(this)),this.distanceMoved>=this.lymphocyte.range*this.sprite.width&&(this.targetOpacity=0),l.a.me.Container.prototype.update.apply(this,[t]),!0))},onCollision:function(t){if(t.b.body.collisionType===l.a.me.collision.types.ENEMY_OBJECT){t.b.attackedBy(this.lymphocyte);var e=l.a.me.state.current();l.a.me.audio.play("hit",!1,null,e.vue.$store.state.soundVolume/100),this.alreadyAttacked=!0,this.targetOpacity=0,this.body.setCollisionMask(l.a.me.collision.types.NO_OBJECT)}}}),I=C.a.extend({init:function(t){var e=l.a.me.state.current();this.oxygenRequired=e.vue.$store.state.CONSTANTS.LYMPHOCYTE_OXYGEN_REQUIRED,C.a.prototype.init.apply(this,[{tilemap:t.tilemap,image:e.vue.$store.state.sprites,region:"lymphocyte",framewidth:e.vue.$store.state.CONSTANTS.TILE_SIZE,frameheight:e.vue.$store.state.CONSTANTS.TILE_SIZE,anchorPoint:new l.a.me.Vector2d(0,0),mapCoords:t.mapCoords}]),e.vue.$set(this,"maxHealth",e.vue.$store.state.CONSTANTS.LYMPHOCYTE_MAX_HEALTH),e.vue.$set(this,"damageLower",e.vue.$store.state.CONSTANTS.LYMPHOCYTE_DAMAGE_LOWER),e.vue.$set(this,"damageUpper",e.vue.$store.state.CONSTANTS.LYMPHOCYTE_DAMAGE_UPPER),e.vue.$set(this,"shotInterval",e.vue.$store.state.CONSTANTS.LYMPHOCYTE_SHOT_INTERVAL),e.vue.$set(this,"range",e.vue.$store.state.CONSTANTS.LYMPHOCYTE_RANGE),e.vue.$set(this,"speed",e.vue.$store.state.CONSTANTS.LYMPHOCYTE_SPEED),e.vue.$set(this,"creationRate",e.vue.$store.state.CONSTANTS.LYMPHOCYTE_CREATION_RATE),this.attacking=!1,this.lastClick=0},update:function(t){var e=this;if(l.a.me.state.current().vue.$store.state.paused)return!1;var i=!1;if(this.lastUpdateTime+t>=30){if(!this.target&&0===this.path.length){for(var s=[],a=function(t){for(var i=function(i){var a=e.mapCoords.y+i;if(i===-t||i===t){for(var o=function(t){if(Math.pow(i,2)+Math.pow(t,2)>Math.pow(e.range,2))return"continue";var o=e.mapCoords.x+t;if(a<0||a>=e.tilemap.rows||o<0||o>=e.tilemap.cols)return"continue";var r,n=o+","+a;Array.isArray(e.entityList[n])&&e.entityList[n].length>0&&(r=s).push.apply(r,S()(e.entityList[n].filter((function(t){return e.hostile(t)})).map((function(e){return{distanceSquared:Math.pow(i,2)+Math.pow(t,2),entity:e}}))))},r=-t;r<=t;++r)o(r);return"continue"}if(Math.pow(i,2)+Math.pow(t,2)>Math.pow(e.range,2))return"continue";var n=e.mapCoords.x-t;if(a>=0&&a<e.tilemap.rows&&n-t>=0){var l,h=n+","+a;if(Array.isArray(e.entityList[h])&&e.entityList[h].length>0)(l=s).push.apply(l,S()(e.entityList[h].filter((function(t){return e.hostile(t)})).map((function(e){return{distanceSquared:Math.pow(i,2)+Math.pow(t,2),entity:e}}))))}if(n=e.mapCoords.x+t,a>=0&&a<e.tilemap.rows&&n+t<e.tilemap.cols){var u,d=n+","+a;if(Array.isArray(e.entityList[d])&&e.entityList[d].length>0)(u=s).push.apply(u,S()(e.entityList[d].filter((function(t){return e.hostile(t)})).map((function(e){return{distanceSquared:Math.pow(i,2)+Math.pow(t,2),entity:e}}))))}},a=-t;a<=t;++a)i(a)},o=1;s.length<=0&&o<=Math.ceil(this.range);++o)a(o);if(s.length>0){var r=Math.min.apply(Math,S()(s.map((function(t){return t.distanceSquared}))));(s=s.filter((function(t){return t.distanceSquared<=r}))).length>0&&(this.setTarget(s[Math.floor(Math.random()*s.length)].entity),i=!0)}}this.attacking&&(this.target&&this.target.pos&&this.pos&&Math.pow(this.target.pos.x-this.pos.x,2)+Math.pow(this.target.pos.y-this.pos.y,2)>Math.pow(this.range*this.width,2)&&(this.attacking=!1),this.sprite.rotate(Math.PI/16),i=!0)}return i=C.a.prototype.update.apply(this,[t])||i},click:function(){var t=(new Date).getTime();if(t-this.lastClick>=300)return this.lastClick=t,void C.a.prototype.click.apply(this);this.lastClick=t;var e=l.a.me.state.current(),i=[],s=l.a.me.game.viewport.localToWorld(0,0),a=l.a.me.game.viewport.getWidth(),o=l.a.me.game.viewport.getHeight(),r=l.a.me.game.viewport.localToWorld(a>o?.8*a:a,a>o?o:.8*o),n=this.tilemap.getRenderer().pixelToTileCoords(s.x,s.y);n.x=Math.floor(n.x),n.y=Math.floor(n.y);var h=this.tilemap.getRenderer().pixelToTileCoords(r.x,r.y);h.x=Math.floor(h.x),h.y=Math.floor(h.y);for(var u=n.y;u<=h.y;++u)for(var d=n.x;d<=h.x;++d){var c=d+","+u;if(Array.isArray(this.entityList[c])){var p=this.entityList[c].filter((function(t){return t instanceof I}));p.length>0&&i.push.apply(i,S()(p))}}e.select(i)},attack:function(){new w(this);var t=l.a.me.state.current();l.a.me.audio.play("ranged",!1,null,t.vue.$store.state.soundVolume/100),this.attacking=!0},setTarget:function(t){C.a.prototype.setTarget.apply(this,[t]),null===t&&(this.attacking=!1)},setGoal:function(t){this.attacking=!1,C.a.prototype.setGoal.apply(this,[t])},hostile:function(t){return t instanceof O},draw:function(t){C.a.prototype.draw.apply(this,[t]);var e=l.a.me.state.current();this.attacking&&this.target&&this.target.pos&&this.pos&&(t.setLineWidth(1),t.setColor(e.vue.$store.state.CONSTANTS.ATTACK_LINE_COLOR),t.strokeLine(0,0,this.target.pos.x-this.pos.x,this.target.pos.y-this.pos.y))}}),x=I,_=C.a.extend({init:function(t){var e=l.a.me.state.current();this.oxygenRequired=e.vue.$store.state.CONSTANTS.PHAGOCYTE_OXYGEN_REQUIRED,C.a.prototype.init.apply(this,[{tilemap:t.tilemap,image:e.vue.$store.state.sprites,region:"phagocyte",framewidth:64,frameheight:64,anchorPoint:new l.a.me.Vector2d(0,0),mapCoords:t.mapCoords}]),e.vue.$set(this,"maxHealth",e.vue.$store.state.CONSTANTS.PHAGOCYTE_MAX_HEALTH),e.vue.$set(this,"damageLower",e.vue.$store.state.CONSTANTS.PHAGOCYTE_DAMAGE_LOWER),e.vue.$set(this,"damageUpper",e.vue.$store.state.CONSTANTS.PHAGOCYTE_DAMAGE_UPPER),e.vue.$set(this,"shotInterval",e.vue.$store.state.CONSTANTS.PHAGOCYTE_SHOT_INTERVAL),e.vue.$set(this,"range",e.vue.$store.state.CONSTANTS.PHAGOCYTE_RANGE),e.vue.$set(this,"speed",e.vue.$store.state.CONSTANTS.PHAGOCYTE_SPEED),e.vue.$set(this,"creationRate",e.vue.$store.state.CONSTANTS.PHAGOCYTE_CREATION_RATE),this.attacking=!1,this.lastClick=0},update:function(t){var e=this;if(l.a.me.state.current().vue.$store.state.paused)return!1;var i=!1;if(this.lastUpdateTime+t>=30){if(!this.target&&0===this.path.length){for(var s=[],a=function(t){for(var i=function(i){var a=e.mapCoords.y+i;if(i===-t||i===t){for(var o=function(t){if(Math.pow(i,2)+Math.pow(t,2)>Math.pow(e.range,2))return"continue";var o=e.mapCoords.x+t;if(a<0||a>=e.tilemap.rows||o<0||o>=e.tilemap.cols)return"continue";var r,n=o+","+a;Array.isArray(e.entityList[n])&&e.entityList[n].length>0&&(r=s).push.apply(r,S()(e.entityList[n].filter((function(t){return e.hostile(t)})).map((function(e){return{distanceSquared:Math.pow(i,2)+Math.pow(t,2),entity:e}}))))},r=-t;r<=t;++r)o(r);return"continue"}if(Math.pow(i,2)+Math.pow(t,2)>Math.pow(e.range,2))return"continue";var n=e.mapCoords.x-t;if(a>=0&&a<e.tilemap.rows&&n-t>=0){var l,h=n+","+a;if(Array.isArray(e.entityList[h])&&e.entityList[h].length>0)(l=s).push.apply(l,S()(e.entityList[h].filter((function(t){return e.hostile(t)})).map((function(e){return{distanceSquared:Math.pow(i,2)+Math.pow(t,2),entity:e}}))))}if(n=e.mapCoords.x+t,a>=0&&a<e.tilemap.rows&&n+t<e.tilemap.cols){var u,d=n+","+a;if(Array.isArray(e.entityList[d])&&e.entityList[d].length>0)(u=s).push.apply(u,S()(e.entityList[d].filter((function(t){return e.hostile(t)})).map((function(e){return{distanceSquared:Math.pow(i,2)+Math.pow(t,2),entity:e}}))))}},a=-t;a<=t;++a)i(a)},o=1;s.length<=0&&o<=Math.ceil(this.range);++o)a(o);if(s.length>0){var r=Math.min.apply(Math,S()(s.map((function(t){return t.distanceSquared}))));(s=s.filter((function(t){return t.distanceSquared<=r}))).length>0&&(this.setTarget(s[Math.floor(Math.random()*s.length)].entity),i=!0)}}this.attacking&&(this.target&&this.target.pos&&this.pos&&Math.pow(this.target.pos.x-this.pos.x,2)+Math.pow(this.target.pos.y-this.pos.y,2)>Math.pow(this.range*this.width,2)&&(this.attacking=!1),this.sprite.rotate(Math.PI/16),i=!0)}return i=C.a.prototype.update.apply(this,[t])||i},click:function(){var t=(new Date).getTime();if(t-this.lastClick>=300)return this.lastClick=t,void C.a.prototype.click.apply(this);this.lastClick=t;var e=l.a.me.state.current(),i=[],s=l.a.me.game.viewport.localToWorld(0,0),a=l.a.me.game.viewport.getWidth(),o=l.a.me.game.viewport.getHeight(),r=l.a.me.game.viewport.localToWorld(a>o?.8*a:a,a>o?o:.8*o),n=this.tilemap.getRenderer().pixelToTileCoords(s.x,s.y);n.x=Math.floor(n.x),n.y=Math.floor(n.y);var h=this.tilemap.getRenderer().pixelToTileCoords(r.x,r.y);h.x=Math.floor(h.x),h.y=Math.floor(h.y);for(var u=n.y;u<=h.y;++u)for(var d=n.x;d<=h.x;++d){var c=d+","+u;if(Array.isArray(this.entityList[c])){var p=this.entityList[c].filter((function(t){return t instanceof _}));p.length>0&&i.push.apply(i,S()(p))}}e.select(i)},attack:function(){var t=l.a.me.state.current();this.attacking=!0,l.a.me.audio.play("phagocyte",!1,null,t.vue.$store.state.soundVolume/100),this.target.attackedBy(this)},setTarget:function(t){C.a.prototype.setTarget.apply(this,[t]),null===t&&(this.attacking=!1)},setGoal:function(t){this.attacking=!1,C.a.prototype.setGoal.apply(this,[t])},hostile:function(t){return t instanceof O},draw:function(t){C.a.prototype.draw.apply(this,[t]);var e=l.a.me.state.current();this.attacking&&this.target&&this.target.pos&&this.pos&&(t.setLineWidth(1),t.setColor(e.vue.$store.state.CONSTANTS.ATTACK_LINE_COLOR),t.strokeLine(0,0,this.target.pos.x-this.pos.x,this.target.pos.y-this.pos.y))}}),$=_,b={RedBloodCell:v.a,Lymphocyte:x,Phagocyte:$},E=y.a.extend({init:function(t){var e=l.a.me.state.current();e.vue.$set(this,"creating",null),e.vue.$set(this,"progress",0),e.vue.$set(this,"maxProgress",1),this.oxygenRequired=e.vue.$store.state.CONSTANTS.BONE_MARROW_OXYGEN_REQUIRED,t.image=e.vue.$store.state.sprites,t.region="boneMarrow",t.framewidth=e.vue.$store.state.CONSTANTS.TILE_SIZE,t.frameheight=e.vue.$store.state.CONSTANTS.TILE_SIZE,t.anchorPoint=new l.a.me.Vector2d(0,0),y.a.prototype.init.apply(this,[t]),this.maxHealth=e.vue.$store.state.CONSTANTS.BONE_MARROW_MAX_HEALTH,this.constructionRate=e.vue.$store.state.CONSTANTS.BONE_MARROW_CONSTRUCTION_RATE,this.creatingUnit=null,this.constructionSoundPlayed=!1},create:function(t){if(b[t]){for(var e=[],i=l.a.me.state.current(),s="",a=-1;a<=1;++a)for(var o=-1;o<=1;++o){var r=this.mapCoords.y+a,n=this.mapCoords.x+o;if(!(r<0||r>=this.tilemap.rows||n<0||n>=this.tilemap.cols)){var h=this.tilemap.getRenderer().tileToPixelCoords(n,r);this.tilemap.getLayers()[0].getTile(h.x,h.y).tileId>1||(s=n+","+r,(!Array.isArray(i.entityList[s])||i.entityList[s].length<=0)&&e.push(new l.a.me.Vector2d(n,r)))}}if(e.length<=0)throw"No space to create Blood Cell; move some existing Blood Cells aside.";var u=e[Math.floor(Math.random()*e.length)];s=u.x+","+u.y,Array.isArray(i.entityList[s])||(i.entityList[s]=[]),this.creatingUnit=new b[t]({tilemap:this.tilemap,mapCoords:u}),this.creatingUnit.setOpacity(0),this.creatingUnit.health=0,this.creating=t,this.progress=0,this.maxProgress=this.creatingUnit.maxHealth,this.creatingUnit instanceof $?l.a.me.audio.play("building_phagocyte",!1,null,i.vue.$store.state.soundVolume/100):this.creatingUnit instanceof x?l.a.me.audio.play("building_lymphocyte",!1,null,i.vue.$store.state.soundVolume/100):this.creatingUnit instanceof v.a&&l.a.me.audio.play("building_erythrocyte",!1,null,i.vue.$store.state.soundVolume/100)}},update:function(t){var e=l.a.me.state.current();if(e.vue.$store.state.paused)return!1;this.constructed||this.constructionSoundPlayed||(l.a.me.audio.play("building_bone_marrow",!1,null,e.vue.$store.state.soundVolume/100),this.constructionSoundPlayed=!0);var i=!1;return this.lastUpdateTime+t>=30&&this.creatingUnit&&(this.creatingUnit.health>=this.creatingUnit.maxHealth?(this.creatingUnit.health=this.creatingUnit.maxHealth,this.creatingUnit instanceof $?(e.tutorialVars.buildPhagocyteResolve&&e.tutorialVars.buildPhagocyteResolve(),l.a.me.audio.play("phagocyte_ready",!1,null,e.vue.$store.state.soundVolume/100)):this.creatingUnit instanceof x?(e.tutorialVars.buildLymphocyteResolve&&e.tutorialVars.buildLymphocyteResolve(),l.a.me.audio.play("lymphocyte_ready",!1,null,e.vue.$store.state.soundVolume/100)):this.creatingUnit instanceof v.a&&l.a.me.audio.play("erythrocyte_ready",!1,null,e.vue.$store.state.soundVolume/100),this.creatingUnit=null,this.creating=null,this.progress=0,this.maxProgress=0):(this.creatingUnit.health+=this.creatingUnit.creationRate,this.progress=this.creatingUnit.health,this.creatingUnit.setOpacity(this.creatingUnit.health/this.creatingUnit.maxHealth))),i=y.a.prototype.update.apply(this,[t])||i},constructedEvent:function(){var t=l.a.me.state.current();t.tutorialVars.buildBoneMarrowResolve&&t.tutorialVars.buildBoneMarrowResolve(),l.a.me.audio.play("bone_marrow_ready",!1,null,t.vue.$store.state.soundVolume/100)}}),R=i("91cd"),L=i("3e86"),M=O.extend({init:function(t){var e=l.a.me.state.current();O.prototype.init.apply(this,[{tilemap:t.tilemap,image:e.vue.$store.state.sprites,region:"sars",framewidth:64,frameheight:64,anchorPoint:new l.a.me.Vector2d(0,0),mapCoords:t.mapCoords}]),this.subContainer.addChild(this.text=new l.a.me.Sprite(-this.sprite.width/2,-this.sprite.height/2,{image:e.vue.$store.state.sprites,region:"sars_text",framewidth:64,frameheight:64,anchorPoint:new l.a.me.Vector2d(0,0)})),e.vue.$set(this,"health",e.vue.$store.state.CONSTANTS.SARS_HEALTH),e.vue.$set(this,"maxHealth",e.vue.$store.state.CONSTANTS.SARS_MAX_HEALTH),e.vue.$set(this,"damageLower",e.vue.$store.state.CONSTANTS.SARS_DAMAGE_LOWER),e.vue.$set(this,"damageUpper",e.vue.$store.state.CONSTANTS.SARS_DAMAGE_UPPER),e.vue.$set(this,"shotInterval",e.vue.$store.state.CONSTANTS.SARS_SHOT_INTERVAL),e.vue.$set(this,"range",e.vue.$store.state.CONSTANTS.SARS_RANGE),e.vue.$set(this,"speed",e.vue.$store.state.CONSTANTS.SARS_SPEED),this.attacking=!1}}),U=O.extend({init:function(t){var e=l.a.me.state.current();O.prototype.init.apply(this,[{tilemap:t.tilemap,image:e.vue.$store.state.sprites,region:"mers",framewidth:e.vue.$store.state.CONSTANTS.TILE_SIZE,frameheight:e.vue.$store.state.CONSTANTS.TILE_SIZE,anchorPoint:new l.a.me.Vector2d(0,0),mapCoords:t.mapCoords}]),this.subContainer.addChild(this.text=new l.a.me.Sprite(-this.sprite.width/2,-this.sprite.height/2,{image:e.vue.$store.state.sprites,region:"mers_text",framewidth:64,frameheight:64,anchorPoint:new l.a.me.Vector2d(0,0)})),e.vue.$set(this,"health",e.vue.$store.state.CONSTANTS.MERS_HEALTH),e.vue.$set(this,"maxHealth",e.vue.$store.state.CONSTANTS.MERS_MAX_HEALTH),e.vue.$set(this,"damageLower",e.vue.$store.state.CONSTANTS.MERS_DAMAGE_LOWER),e.vue.$set(this,"damageUpper",e.vue.$store.state.CONSTANTS.MERS_DAMAGE_UPPER),e.vue.$set(this,"shotInterval",e.vue.$store.state.CONSTANTS.MERS_SHOT_INTERVAL),e.vue.$set(this,"range",e.vue.$store.state.CONSTANTS.MERS_RANGE),e.vue.$set(this,"speed",e.vue.$store.state.CONSTANTS.MERS_SPEED),this.attacking=!1}}),P=O.extend({init:function(t){var e=l.a.me.state.current();O.prototype.init.apply(this,[{tilemap:t.tilemap,image:e.vue.$store.state.sprites,region:"covid",framewidth:e.vue.$store.state.CONSTANTS.TILE_SIZE,frameheight:e.vue.$store.state.CONSTANTS.TILE_SIZE,anchorPoint:new l.a.me.Vector2d(0,0),mapCoords:t.mapCoords}]),this.subContainer.addChild(this.text=new l.a.me.Sprite(-this.sprite.width/2,-this.sprite.height/2,{image:e.vue.$store.state.sprites,region:"covid_text",framewidth:64,frameheight:64,anchorPoint:new l.a.me.Vector2d(0,0)})),e.vue.$set(this,"health",e.vue.$store.state.CONSTANTS.COVID_HEALTH),e.vue.$set(this,"maxHealth",e.vue.$store.state.CONSTANTS.COVID_MAX_HEALTH),e.vue.$set(this,"damageLower",e.vue.$store.state.CONSTANTS.COVID_DAMAGE_LOWER),e.vue.$set(this,"damageUpper",e.vue.$store.state.CONSTANTS.COVID_DAMAGE_UPPER),e.vue.$set(this,"shotInterval",e.vue.$store.state.CONSTANTS.COVID_SHOT_INTERVAL),e.vue.$set(this,"range",e.vue.$store.state.CONSTANTS.COVID_RANGE),e.vue.$set(this,"speed",e.vue.$store.state.CONSTANTS.COVID_SPEED),this.attacking=!1}}),D=i("6a93"),k=i.n(D),B=i("fae2"),H=i.n(B),V=i("fca3"),G=i.n(V),Y=i("54cf"),q=i.n(Y),F=i("99b9"),W=i.n(F),z=i("fd39"),X=i.n(z),K=i("093e"),Q=i.n(K),Z=i("23aa"),J=i.n(Z),j={components:{dialog_end:f},data:function(){return{building:null,showing:null,isConstructing:null,buildingClass:{"Bone Marrow":E,"Pulmonary Artery":R.default,Capillaries:L.default},dragMode:this.$q.platform.is.mobile?"scroll":"select",dragModeStyle:{},toolbarStyle:{},buttonAreaStyle:{},singleUnit:null,multipleUnits:null,startTime:0,timeAmount:0,timer:0,timerInterval:null,startElapsedTime:null,timeElapsed:0,displayPendingInfections:!1,currentState:{},unwatchPlayer:null,unwatchViruses:null,disableBuildBoneMarrow:!1,disableBuildPulmonaryArtery:!1,disableBuildCapillaries:!1,disableBuildErythrocyte:!1,disableBuildPhagocyte:!1,disableBuildLymphocyte:!1,sprites:{boneMarrow:k.a,capillaries:H.a,covid:G.a,lymphocyte:q.a,mers:W.a,phagocyte:X.a,pulmonaryArtery:Q.a,sars:J.a}}},computed:{buildingName:function(){var t=this;return Object.keys(this.buildingClass).find((function(e){return t.building instanceof t.buildingClass[e]}))},unitName:function(){return this.singleUnit instanceof $?"Phagocyte":this.singleUnit instanceof x?"Lymphocyte":this.singleUnit instanceof M?"SARS":this.singleUnit instanceof U?"MERS":this.singleUnit instanceof P?"COVID-19":void 0},phagocytesSelected:function(){return this.multipleUnits?this.multipleUnits.filter((function(t){return t instanceof $})).length:0},lymphocytesSelected:function(){return this.multipleUnits?this.multipleUnits.filter((function(t){return t instanceof x})).length:0},constructionOptionsStyle:function(){var t={flexDirection:this.$parent.$refs.screen.clientWidth>this.$parent.$refs.screen.clientHeight?"column":"row"};return"constructionOptions"!==this.showing&&(t.display="none"),t},boneMarrowOptionsStyle:function(){var t={flexDirection:this.$parent.$refs.screen.clientWidth>this.$parent.$refs.screen.clientHeight?"column":"row"};return"boneMarrowOptions"!==this.showing&&(t.display="none"),t},timerStyle:function(){return this.timer<=0?{display:"none"}:Math.round(this.timer/1e3)<=10?{color:"#ffff00"}:{color:"#ffffff"}}},methods:{build:function(t){var e=l.a.me.state.current();this.isConstructing!==t?(this.isConstructing=t,e.build(this.buildingClass[t]),e.tutorialVars.buildBoneMarrowButtonResolve&&"Bone Marrow"===t&&e.tutorialVars.buildBoneMarrowButtonResolve()):(this.isConstructing=null,l.a.me.state.current().build(null))},create:function(t){if(this.building)try{this.building.create(t)}catch(t){this.$q.notify({message:t,position:"top"})}else this.$q.notify({message:"No building selected.",position:"top"})},setDragMode:function(t){var e=l.a.me.state.current();e.dragMode=this.dragMode=t,e.tutorialVars.dragToSelectButtonResolve&&"select"===t&&e.tutorialVars.dragToSelectButtonResolve()},resize:function(){this.$parent.$refs.screen.clientWidth>this.$parent.$refs.screen.clientHeight?(this.dragModeStyle={left:"4px",bottom:"4px",width:"100%"},this.toolbarStyle={left:"80%",top:0,width:"20%",height:"100%",boxShadow:"-4px 0 4px",flexDirection:"column"}):(this.dragModeStyle={right:"4px",top:"4px",height:"100%"},this.toolbarStyle={left:0,top:"80%",width:"100%",height:"20%",boxShadow:"0 -4px 4px",flexDirection:"row"})},startTimer:function(t){var e=this;this.startTime=Date.now(),this.timer=this.timeAmount=t,this.timerInterval=setInterval((function(){e.timer=e.timeAmount-(Date.now()-e.startTime),e.timer<=0&&(e.timer=0,e.startElapsedTime=new Date,l.a.me.state.current().startInfection(),e.displayPendingInfections=!0,clearInterval(e.timerInterval),e.timerInterval=setInterval(e.timeElapsedCounter.bind(e),1e3))}),1e3)},timeElapsedCounter:function(){this.timeElapsed=Date.now()-this.startElapsedTime},resetVars:function(){var t=this;this.currentState=l.a.me.state.current(),this.building=null,this.showing=null,this.isConstructing=null,this.dragMode=this.$q.platform.is.mobile?"scroll":"select",this.singleUnit=null,this.multipleUnits=null,this.startTime=0,this.timeAmount=0,this.timer=0,this.timerInterval&&clearInterval(this.timerInterval),this.timerInterval=null,this.displayPendingInfections=!1,this.currentState=l.a.me.state.current(),this.unwatchPlayer&&this.unwatchPlayer(),this.unwatchViruses&&this.unwatchViruses(),this.unwatchPlayer=this.$watch((function(){return t.currentState.player.length}),(function(e){t.displayPendingInfections&&e<=0&&(t.$store.commit("paused",!0),t.currentState.stopInfection(),t.$refs.dialog_end.show(),clearInterval(t.timerInterval))})),this.unwatchViruses=this.$watch((function(){return t.currentState.viruses.length}),(function(e){t.displayPendingInfections&&e<=0&&t.$store.state.pendingSars<=0&&t.$store.state.pendingMers<=0&&t.$store.state.pendingCovid<=0&&(t.$store.commit("paused",!0),t.currentState.stopInfection(),t.$refs.dialog_end.show(),clearInterval(t.timerInterval))}))}},mounted:function(){this.resize(),window.removeEventListener("resize",this.resize),window.addEventListener("resize",this.resize)},beforeDestroy:function(){clearInterval(this.timerInterval)}},tt=(i("807e"),Object(T.a)(j,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"topLeft"},[s("div",{style:t.timerStyle},[t._v(t._s((t.timer/1e3).toFixed(0))+" s until infection starts")]),s("div",{staticClass:"text-white",style:t.displayPendingInfections?"display:none":""},[t._v("Organ & Blood Cell limit: "+t._s(t.currentState.player?t.currentState.player.length:0)+"/"+t._s(t.$store.state.CONSTANTS.POPULATION_LIMIT))])]),s("div",{staticClass:"topLeft text-white",style:t.displayPendingInfections?"":"display:none"},[s("div",[t._v("Time elapsed: "),t.timeElapsed>=36e5?s("span",[t._v(t._s(Math.floor(t.timeElapsed/36e5))+" h ")]):t._e(),Math.floor(t.timeElapsed/1e3%3600/60)>0?s("span",[t._v(t._s(Math.floor(t.timeElapsed/1e3%3600/60))+" min ")]):t._e(),Math.floor(t.timeElapsed/1e3%60)>0?s("span",[t._v(t._s(Math.floor(t.timeElapsed/1e3%60))+" s")]):t._e()]),s("div",[t._v("Pending SARS infections: "+t._s(t.$store.state.pendingSars))]),s("div",[t._v("Pending MERS infections: "+t._s(t.$store.state.pendingMers))]),s("div",[t._v("Pending COVID-19 infections: "+t._s(t.$store.state.pendingCovid))]),s("div",[t._v("Viruses alive/maximum: "+t._s(t.currentState.viruses?t.currentState.viruses.length:0)+"/"+t._s(t.$store.state.CONSTANTS.VIRUS_LIMIT))]),s("div",[t._v("Organ & Blood Cell limit: "+t._s(t.currentState.player?t.currentState.player.length:0)+"/"+t._s(t.$store.state.CONSTANTS.POPULATION_LIMIT))])]),s("div",{style:t.toolbarStyle,attrs:{id:"toolbar"}},[s("div",{attrs:{id:"mainArea"}},[s("div",{staticClass:"buttonArea",style:t.constructionOptionsStyle},[s("q-btn",{staticClass:"buildButton text-white items-center",style:"Bone Marrow"===t.isConstructing?"background-color:rgba(0,255,0,0.5)":"",attrs:{"no-caps":"",dense:"",glossy:"",push:"",size:this.$q.platform.is.mobile?"xs":"sm",disable:t.disableBuildBoneMarrow||t.currentState.player&&t.currentState.player.length>=t.$store.state.CONSTANTS.POPULATION_LIMIT||t.$store.state.oxygen<t.$store.state.CONSTANTS.BONE_MARROW_OXYGEN_REQUIRED},on:{click:function(e){return t.build("Bone Marrow")}}},[s("div",[s("img",{attrs:{src:i("6a93")}}),s("br"),t._v("\n\t\t\t\t\t\tBuild Bone Marrow\n\t\t\t\t\t\t"),s("br"),t._v("\n\t\t\t\t\t\t"+t._s(t.$store.state.CONSTANTS.BONE_MARROW_OXYGEN_REQUIRED)+" Oxygen\n\t\t\t\t\t")])]),s("q-btn",{staticClass:"buildButton text-white items-center",style:"Pulmonary Artery"===t.isConstructing?"background-color:rgba(0,255,0,0.5)":"",attrs:{"no-caps":"",dense:"",glossy:"",push:"",size:this.$q.platform.is.mobile?"xs":"sm",disable:t.disableBuildPulmonaryArtery||t.currentState.player&&t.currentState.player.length>=t.$store.state.CONSTANTS.POPULATION_LIMIT||t.$store.state.oxygen<t.$store.state.CONSTANTS.PULMONARY_ARTERY_OXYGEN_REQUIRED},on:{click:function(e){return t.build("Pulmonary Artery")}}},[s("div",[s("img",{attrs:{src:i("093e")}}),s("br"),t._v("\n\t\t\t\t\t\tBuild Pulmonary Artery\n\t\t\t\t\t\t"),s("br"),t._v("\n\t\t\t\t\t\t"+t._s(t.$store.state.CONSTANTS.PULMONARY_ARTERY_OXYGEN_REQUIRED)+" Oxygen\n\t\t\t\t\t")])]),s("q-btn",{staticClass:"buildButton text-white items-center",style:"Capillaries"===t.isConstructing?"background-color:rgba(0,255,0,0.5)":"",attrs:{"no-caps":"",dense:"",glossy:"",push:"",size:this.$q.platform.is.mobile?"xs":"sm",disable:t.disableBuildCapillaries||t.currentState.player&&t.currentState.player.length>=t.$store.state.CONSTANTS.POPULATION_LIMIT||t.$store.state.oxygen<t.$store.state.CONSTANTS.CAPILLARIES_OXYGEN_REQUIRED},on:{click:function(e){return t.build("Capillaries")}}},[s("div",[s("img",{attrs:{src:i("fae2")}}),s("br"),t._v("\n\t\t\t\t\t\tBuild Capillaries\n\t\t\t\t\t\t"),s("br"),t._v("\n\t\t\t\t\t\t"+t._s(t.$store.state.CONSTANTS.CAPILLARIES_OXYGEN_REQUIRED)+" Oxygen\n\t\t\t\t\t")])])],1),s("div",{staticClass:"buttonArea",style:t.boneMarrowOptionsStyle},[s("q-btn",{staticClass:"buildButton text-white text-caption items-center",attrs:{"no-caps":"",dense:"",glossy:"",push:"",size:this.$q.platform.is.mobile?"xs":"sm",disable:t.disableBuildErythrocyte||t.currentState.player&&t.currentState.player.length>=t.$store.state.CONSTANTS.POPULATION_LIMIT||t.$store.state.oxygen<t.$store.state.CONSTANTS.ERYTHROCYTE_OXYGEN_REQUIRED||t.building&&null!==t.building.creating},on:{click:function(e){return t.create("RedBloodCell")}}},[s("div",[s("img",{attrs:{src:i("f6a7")}}),s("br"),t._v("\n\t\t\t\t\t\tBuild Erythrocyte\n\t\t\t\t\t\t"),s("br"),t._v("\n\t\t\t\t\t\t"+t._s(t.$store.state.CONSTANTS.ERYTHROCYTE_OXYGEN_REQUIRED)+" Oxygen\n\t\t\t\t\t")]),s("q-circular-progress",{staticClass:"unitProgress",style:t.building&&"RedBloodCell"===t.building.creating?"":"display:none",attrs:{color:"white",thickness:1,"show-value":!0,value:t.building?t.building.progress/t.building.maxProgress:0,min:0,max:1,"instant-feedback":""}},[s("div",{staticClass:"text-caption unitProgressText"},[t._v("\t\n\t\t\t\t\t\t\t"+t._s((t.building?t.building.progress/t.building.maxProgress*100:0).toFixed(0))+"%\n\t\t\t\t\t\t")])])],1),s("q-btn",{staticClass:"buildButton text-white text-caption items-center",attrs:{"no-caps":"",dense:"",glossy:"",push:"",size:this.$q.platform.is.mobile?"xs":"sm",disable:t.disableBuildPhagocyte||t.currentState.player&&t.currentState.player.length>=t.$store.state.CONSTANTS.POPULATION_LIMIT||t.$store.state.oxygen<t.$store.state.CONSTANTS.PHAGOCYTE_OXYGEN_REQUIRED||t.building&&null!==t.building.creating},on:{click:function(e){return t.create("Phagocyte")}}},[s("div",[s("img",{attrs:{src:i("fd39")}}),s("br"),t._v("\n\t\t\t\t\t\tBuild Phagocyte\n\t\t\t\t\t\t"),s("br"),t._v("\n\t\t\t\t\t\t"+t._s(t.$store.state.CONSTANTS.PHAGOCYTE_OXYGEN_REQUIRED)+" Oxygen\n\t\t\t\t\t")]),s("q-circular-progress",{staticClass:"unitProgress",style:t.building&&"Phagocyte"===t.building.creating?"":"display:none",attrs:{color:"white",thickness:1,"show-value":!0,value:t.building?t.building.progress/t.building.maxProgress:0,min:0,max:1,"instant-feedback":""}},[s("div",{staticClass:"text-caption unitProgressText"},[t._v("\n\t\t\t\t\t\t\t"+t._s((t.building?t.building.progress/t.building.maxProgress*100:0).toFixed(0))+"%\n\t\t\t\t\t\t")])])],1),s("q-btn",{staticClass:"buildButton text-white text-caption items-center",attrs:{"no-caps":"",dense:"",glossy:"",push:"",size:this.$q.platform.is.mobile?"xs":"sm",disable:t.disableBuildLymphocyte||t.currentState.player&&t.currentState.player.length>=t.$store.state.CONSTANTS.POPULATION_LIMIT||t.$store.state.oxygen<t.$store.state.CONSTANTS.LYMPHOCYTE_OXYGEN_REQUIRED||t.building&&null!==t.building.creating},on:{click:function(e){return t.create("Lymphocyte")}}},[s("div",[s("img",{attrs:{src:i("54cf")}}),s("br"),t._v("\n\t\t\t\t\t\tBuild Lymphocyte\n\t\t\t\t\t\t"),s("br"),t._v("\n\t\t\t\t\t\t"+t._s(t.$store.state.CONSTANTS.LYMPHOCYTE_OXYGEN_REQUIRED)+" Oxygen\n\t\t\t\t\t")]),s("q-circular-progress",{staticClass:"unitProgress",style:t.building&&"Lymphocyte"===t.building.creating?"":"display:none",attrs:{color:"white",thickness:1,"show-value":!0,value:t.building?t.building.progress/t.building.maxProgress:0,min:0,max:1,"instant-feedback":""}},[s("div",{staticClass:"text-caption unitProgressText"},[t._v("\n\t\t\t\t\t\t\t"+t._s((t.building?t.building.progress/t.building.maxProgress*100:0).toFixed(0))+"%\n\t\t\t\t\t\t")])])],1)],1),s("div",{staticClass:"infoArea text-white",style:"buildingInfo"===t.showing?"":"display:none"},[s("div",{staticClass:"text-center"},[s("img",{attrs:{src:t.building?t.sprites[t.building.region]:""}}),s("br"),t._v(t._s(t.buildingName))]),s("div",[s("div",{staticClass:"progressContainer",style:t.building&&t.building.constructed?"display:none":""},[s("div",[t._v("Under construction:")]),s("div",{staticClass:"progress"},[s("q-linear-progress",{attrs:{rounded:"",size:"20px",value:t.building?t.building.health/t.building.maxHealth:0,color:"light-green-13","track-color":"red-10"}},[s("div",{staticClass:"absolute-full flex flex-center"},[s("q-badge",{attrs:{color:"black","text-color":"white"}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s((t.building?t.building.health/t.building.maxHealth*100:0).toFixed(0))+"%\n\t\t\t\t\t\t\t\t")])],1)])],1)]),s("div",{staticClass:"progressContainer"},[s("div",[t._v("Health:")]),s("div",{staticClass:"progress"},[s("q-linear-progress",{attrs:{rounded:"",size:"20px",value:t.building?t.building.health/t.building.maxHealth:0,color:"light-green-13","track-color":"red-10"}},[s("div",{staticClass:"absolute-full flex flex-center"},[s("q-badge",{attrs:{color:"black","text-color":"white"}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.building?t.building.health:0)+"/"+t._s(t.building?t.building.maxHealth:0)+"\n\t\t\t\t\t\t\t\t")])],1)])],1)])])]),s("div",{staticClass:"infoArea text-white",style:"singleUnitInfo"===t.showing?"":"display:none"},[s("div",{staticClass:"text-center"},[s("img",{attrs:{src:t.singleUnit?t.sprites[t.singleUnit.region]:""}}),s("br"),t._v(t._s(t.unitName))]),s("div",[s("div",{staticClass:"progressContainer"},[s("div",[t._v("Health:")]),s("div",{staticClass:"progress"},[s("q-linear-progress",{attrs:{rounded:"",size:"20px",value:t.singleUnit?t.singleUnit.health/t.singleUnit.maxHealth:0,color:"light-green-13","track-color":"red-10"}},[s("div",{staticClass:"absolute-full flex flex-center"},[s("q-badge",{attrs:{color:"black","text-color":"white"}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.singleUnit?t.singleUnit.health:0)+"/"+t._s(t.singleUnit?t.singleUnit.maxHealth:0)+"\n\t\t\t\t\t\t\t\t")])],1)])],1)]),s("div",[t._v("Damage: "+t._s(t.singleUnit?t.singleUnit.damageLower:0)+" - "+t._s(t.singleUnit?t.singleUnit.damageUpper:0))]),s("div",[t._v("Attacks every: "+t._s(t.singleUnit?t.singleUnit.shotInterval/1e3:0)+" s")]),s("div",[t._v("Range: "+t._s(t.singleUnit?t.singleUnit.range.toFixed(1):0))]),s("div",[t._v("Speed: "+t._s(t.singleUnit?t.singleUnit.speed.toFixed(1):0))])])]),s("div",{staticClass:"infoArea text-white",style:"multipleUnitInfo"===t.showing?"":"display:none"},[s("div",{staticClass:"text-center",style:t.phagocytesSelected<=0?"display:none":""},[s("img",{attrs:{src:i("fd39")}}),s("br"),t._v("\n\t\t\t\t\tPhagocytes selected: "+t._s(t.phagocytesSelected)+"\n\t\t\t\t")]),s("div",{staticClass:"text-center",style:t.lymphocytesSelected<=0?"display:none":""},[s("img",{attrs:{src:i("54cf")}}),s("br"),t._v("\n\t\t\t\t\tLymphocytes selected: "+t._s(t.lymphocytesSelected)+"\n\t\t\t\t")])])]),s("div",{ref:"dragModeDiv",attrs:{id:"dragModeDiv"}},[s("div",{staticClass:"text-caption text-white text-center"},[t._v("Oxygen: "+t._s(t.$store.state.oxygen))]),s("q-btn",{staticClass:"text-white",style:"scroll"===t.dragMode?"background-color:rgba(0,255,0,0.5)":"",attrs:{"no-caps":"",dense:"",glossy:"",push:"",size:this.$q.platform.is.mobile?"xs":"sm"},on:{click:function(e){return t.setDragMode("scroll")}}},[t._v("Drag to Scroll")]),s("q-btn",{staticClass:"text-white",style:"select"===t.dragMode?"background-color:rgba(0,255,0,0.5)":"",attrs:{"no-caps":"",dense:"",glossy:"",push:"",size:this.$q.platform.is.mobile?"xs":"sm"},on:{click:function(e){return t.setDragMode("select")}}},[t._v("Drag to Select")]),s("q-btn",{staticClass:"text-white",attrs:{"no-caps":"",dense:"",glossy:"",push:"",size:this.$q.platform.is.mobile?"xs":"sm"},on:{click:function(e){return t.$router.replace("/menu")}}},[t._v("Quit Game")])],1)]),s("dialog_end",{ref:"dialog_end"})],1)}),[],!1,null,"774a9b7c",null).exports),et={data:function(){return{showDialog:!1,resolve:null,inAppBrowser:null,inAppBrowserFailedUrl:null}},methods:{ok:function(){try{window.open(this.$store.state.CONSTANTS.AD_URLS[this.$store.state.adIndex],"_blank"),this.$store.commit("adIndex",(this.$store.state.adIndex+1)%this.$store.state.CONSTANTS.AD_URLS.length),this.showDialog=!1}catch(t){console.log(t),this.resolve&&this.resolve()}finally{this.resolve&&this.resolve()}},show:function(){var t=this;return this.showDialog=!0,new Promise((function(e){t.resolve=e}))},preloadUrlCordova:function(){this.inAppBrowser=cordova.InAppBrowser.open(this.$store.state.CONSTANTS.AD_URLS[this.$store.state.adIndex],"_blank","hidden=yes"),this.inAppBrowserFailedUrl=null,this.inAppBrowser.removeEventListener("loaderror",this.inAppBrowserLoadError),this.inAppBrowser.addEventListener("loaderror",this.inAppBrowserLoadError),this.inAppBrowser.removeEventListener("exit",this.inAppBrowserExit),this.inAppBrowser.addEventListener("exit",this.inAppBrowserExit)},showUrlCordova:function(){if(this.inAppBrowser){if(this.inAppBrowserFailedUrl)this.inAppBrowserFailedUrl.indexOf("intent://")>=0&&cordova.InAppBrowser.open(this.$store.state.CONSTANTS.AD_URLS[this.$store.state.adIndex],"_system"),this.inAppBrowser.close();else this.inAppBrowser.show();this.$store.commit("adIndex",(this.$store.state.adIndex+1)%this.$store.state.CONSTANTS.AD_URLS.length)}},inAppBrowserLoadError:function(t){this.inAppBrowserFailedUrl=t.url},inAppBrowserExit:function(){this.resolve&&this.resolve()}},mounted:function(){document.removeEventListener("admob.interstitial.close",this.showUrlCordova),document.addEventListener("admob.interstitial.close",this.showUrlCordova),document.removeEventListener("admob.interstitial.load_fail",this.showUrlCordova.bind(this)),document.addEventListener("admob.interstitial.load_fail",this.showUrlCordova.bind(this))}},it=(i("d47c"),Object(T.a)(et,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-dialog",{attrs:{persistent:""},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[i("q-card",{staticClass:"card"},[i("q-card-section",{staticClass:"text-white"},[t._v("\n\t\t\tWe will be showing you an ad. Thank you for your support.\n\t\t")]),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{"no-caps":"",glossy:"",push:"",color:"red-10",size:"lg"},on:{click:t.ok}},[t._v("Continue >")])],1)],1)],1)}),[],!1,null,"a0b701fe",null).exports),st={data:function(){return{showDialog:!1,resolve:null,complete:!1,showUrlCordovaAlreadyCalled:!1,loadFailAlreadyCalled:!1,rewardAlreadyCalled:!1,inAppBrowser:null,inAppBrowserFailedUrl:null}},methods:{ok:function(){try{this.showDialog=!1,admob.rewardVideo.load({id:{android:"ca-app-pub-8573558036425015/1289809711",ios:"ca-app-pub-8573558036425015/1289809711"},npa:"1"}).then((function(){return admob.rewardVideo.show()}))}catch(t){console.log(t),this.resolve&&this.resolve()}},show:function(){var t=this;return this.complete=!1,this.showUrlCordovaAlreadyCalled=!1,this.loadFailAlreadyCalled=!1,this.rewardAlreadyCalled=!1,this.inAppBrowser=cordova.InAppBrowser.open(this.$store.state.CONSTANTS.AD_URLS[this.$store.state.adIndex],"_blank","hidden=yes"),this.inAppBrowserFailedUrl=null,this.inAppBrowser.removeEventListener("loaderror",this.inAppBrowserLoadError),this.inAppBrowser.addEventListener("loaderror",this.inAppBrowserLoadError),this.inAppBrowser.removeEventListener("exit",this.inAppBrowserExit),this.inAppBrowser.addEventListener("exit",this.inAppBrowserExit),this.showDialog=!0,new Promise((function(e){return t.resolve=e}))},showUrlCordova:function(){if(!this.showUrlCordovaAlreadyCalled&&(this.showUrlCordovaAlreadyCalled=!0,this.inAppBrowser)){if(this.inAppBrowserFailedUrl)this.inAppBrowserFailedUrl.indexOf("intent://")>=0&&cordova.InAppBrowser.open(this.$store.state.CONSTANTS.AD_URLS[this.$store.state.adIndex],"_system"),this.inAppBrowser.close();else this.inAppBrowser.show();this.$store.commit("adIndex",(this.$store.state.adIndex+1)%this.$store.state.CONSTANTS.AD_URLS.length)}},inAppBrowserExit:function(){this.complete?this.resolve&&this.resolve():this.$q.dialog({message:"Unfortunately, as you did not finish watching the ad, you will not get your reward."}).onOk(this.resolve)},inAppBrowserLoadError:function(t){this.inAppBrowserFailedUrl=t.url},loadFail:function(){this.loadFailAlreadyCalled||(this.loadFailAlreadyCalled=!0,this.$q.dialog({message:"Unfortunately, we could not load the ad. You will not be able to claim this reward."}),this.resolve&&this.resolve())},reward:function(){var t=this;return r()(a.a.mark((function e(){var i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.rewardAlreadyCalled){e.next=2;break}return e.abrupt("return");case 2:return t.rewardAlreadyCalled=!0,i=Math.floor(20*Math.random())+1,e.prev=4,e.next=7,u.a.getInstance().rewardOxygen({reward:i});case 7:if(!(s=e.sent).data){e.next=13;break}return t.$q.dialog({message:"Congratulations! You have been rewarded with "+i+" bonus Oxygen. You now have "+s.data+" bonus Oxygen."}),t.$store.commit("bonusOxygen",s.data),t.complete=!0,e.abrupt("return");case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),console.log(e.t0),t.$q.notify({message:e.t0});case 19:t.$q.dialog({message:"Unfortunately, an error occurred while giving you your reward."}),t.complete=!0;case 21:case"end":return e.stop()}}),e,null,[[4,15]])})))()}},mounted:function(){document.removeEventListener("admob.reward_video.close",this.showUrlCordova.bind(this)),document.addEventListener("admob.reward_video.close",this.showUrlCordova.bind(this)),document.removeEventListener("admob.reward_video.load_fail",this.loadFail.bind(this)),document.addEventListener("admob.reward_video.load_fail",this.loadFail.bind(this)),document.removeEventListener("admob.reward_video.reward",this.reward.bind(this)),document.addEventListener("admob.reward_video.reward",this.reward.bind(this))}},at=(i("117b"),Object(T.a)(st,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-dialog",{attrs:{persistent:""},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[i("q-card",{staticClass:"card"},[i("q-card-section",{staticClass:"text-white"},[t._v("\n\t\t\tThank you! You will be shown an ad, and will be rewarded with up to 20 bonus oxygen once the ad finishes.\n\t\t")]),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{"no-caps":"",glossy:"",push:"",color:"red-10",size:"lg"},on:{click:t.ok}},[t._v("Get my reward")])],1)],1)],1)}),[],!1,null,"171a0ba8",null).exports),ot=l.a.me.Stage.extend({init:function(t){this.vue=t,l.a.me.Stage.prototype.init.apply(this)},onResetEvent:function(){l.a.me.game.reset()}}),rt=(i("20d6"),i("6c7b"),l.a.me.Renderable.extend({init:function(t){l.a.me.Renderable.prototype.init.apply(this,[0,0,t.tilewidth,t.tileheight]),l.a.me.game.world.addChild(this,2),this.tilemap=t,this.goalNotification=0,this.lastUpdateTime=0},show:function(t){var e=l.a.me.state.current(),i=this.tilemap.getRenderer().tileToPixelCoords(t.x,t.y);this.translate(i.x-this.pos.x+this.width/2,i.y-this.pos.y+this.height/2),this.goalNotification=e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION},update:function(t){var e=l.a.me.Renderable.prototype.update.apply(this,[t]);return this.goalNotification?(this.lastUpdateTime+=t,this.lastUpdateTime<30?e:(this.lastUpdateTime-=30,--this.goalNotification,!0)):e},draw:function(t){if(this.goalNotification){var e=l.a.me.state.current();t.setLineWidth(4),t.setColor(new l.a.me.Color(0,255,0,1)),t.strokeLine(this.left-this.goalNotification,this.top-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION/2,this.left-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION,this.top-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION),t.strokeLine(this.left-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION/2,this.top-this.goalNotification,this.left-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION,this.top-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION),t.strokeLine(this.right+this.goalNotification,this.top-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION/2,this.right+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION,this.top-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION),t.strokeLine(this.right+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION/2,this.top-this.goalNotification,this.right+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION,this.top-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION),t.strokeLine(this.left-this.goalNotification,this.bottom+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION/2,this.left-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION,this.bottom+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION),t.strokeLine(this.left-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION/2,this.bottom+this.goalNotification,this.left-this.goalNotification+e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION,this.bottom+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION),t.strokeLine(this.right+this.goalNotification,this.bottom+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION/2,this.right+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION,this.bottom+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION),t.strokeLine(this.right+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION/2,this.bottom+this.goalNotification,this.right+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION,this.bottom+this.goalNotification-e.vue.$store.state.CONSTANTS.GOAL_NOTIFICATION_DURATION)}l.a.me.Renderable.prototype.draw.apply(this,[t])}})),nt=l.a.me.Renderable.extend({init:function(t){l.a.me.Renderable.prototype.init.apply(this,[0,0,0,0]),l.a.me.game.world.addChild(this,2),this.tilemap=t,this.startDragPos=null,this.endDragPos=null,this.dragChanged=!1},startDrag:function(t){this.translate(t.x-this.pos.x,t.y-this.pos.y),this.width=0,this.height=0,this.startDragPos=this.endDragPos=t,this.dragChanged=!0},cancelDrag:function(){this.startDragPos=this.endDragPos=null,this.dragChanged=!0},moveDrag:function(t){t.x===this.endDragPos.x&&t.y===this.endDragPos.y||(this.endDragPos=t,this.translate(Math.min(this.startDragPos.x,this.endDragPos.x)-this.pos.x,Math.min(this.startDragPos.y,this.endDragPos.y)-this.pos.y),this.width=Math.max(this.startDragPos.x,this.endDragPos.x)-this.pos.x,this.height=Math.max(this.startDragPos.y,this.endDragPos.y)-this.pos.y,this.pos.x+=this.width/2,this.pos.y+=this.height/2,this.dragChanged=!0)},endDrag:function(t){var e=l.a.me.state.current(),i=this.tilemap.getRenderer().pixelToTileCoords(Math.min(this.startDragPos.x,t.x),Math.min(this.startDragPos.y,t.y));i.x=Math.floor(i.x),i.y=Math.floor(i.y);var s=this.tilemap.getRenderer().pixelToTileCoords(Math.max(this.startDragPos.x,t.x),Math.max(this.startDragPos.y,t.y));s.x=Math.floor(s.x),s.y=Math.floor(s.y);for(var a=[],o=i.y;o<=s.y;++o)for(var r=i.x;r<=s.x;++r){var n=r+","+o;Array.isArray(e.entityList[n])&&a.push.apply(a,S()(e.entityList[n].filter((function(t){return t instanceof C.a}))))}l.a.me.state.current().select(a),this.startDragPos=this.endDragPos=null,this.dragChanged=!0},update:function(t){var e=l.a.me.Renderable.prototype.update.apply(this,[t]);return this.dragChanged?(this.dragChanged=!1,!0):e},draw:function(t){this.startDragPos&&this.endDragPos&&(t.setLineWidth(1),t.setColor(new l.a.me.Color(255,255,255,1)),t.strokeRect(this.pos.x,this.pos.y,this.width,this.height)),l.a.me.Renderable.prototype.draw.apply(this,[t])}}),lt=i("f6a7"),ht=i.n(lt),ut=i("4a3d"),dt=i.n(ut),ct=l.a.me.Stage.extend({init:function(t){this.vue=t,l.a.me.Stage.prototype.init.apply(this)},onResetEvent:function(){var t=this;this.entityList={},this.selected=[],this.pulmonaryArteries=[],this.capillaries=[],this.tutorialVars={},l.a.me.game.reset(),l.a.me.game.world.gravity=0;var e={};for(var i in this.vue.$store.state.GENERAL_CONSTANTS)this.vue.$set(e,i,this.vue.$store.state.GENERAL_CONSTANTS[i]);var s=this.vue.$store.state.difficulty>=0?this.vue.$store.state.difficulty:0;for(var a in this.vue.$store.state.DIFFICULTY_CONSTANTS[s])this.vue.$set(e,a,this.vue.$store.state.DIFFICULTY_CONSTANTS[s][a]);this.vue.$store.commit("CONSTANTS",e),this.vue.$store.commit("oxygen",this.vue.$store.state.difficulty<0?0:this.vue.$store.state.CONSTANTS.START_OXYGEN+this.vue.$store.state.bonusOxygenToUse),this.vue.$store.commit("bonusOxygenToUse",0),this.vue.$store.commit("paused",!1),l.a.me.game.world.autoDepth=!1;var o,r=l.a.me.game.viewport.getWidth(),n=l.a.me.game.viewport.getHeight();if(l.a.me.game.viewport.setBounds(0,0,Math.max(r,(this.vue.$store.state.difficulty<0?this.vue.$store.state.CONSTANTS.TUTORIAL_MAP_WIDTH:this.vue.$store.state.CONSTANTS.MAP_WIDTH)*this.vue.$store.state.CONSTANTS.TILE_SIZE+(r>n?.2*r:0)),Math.max(n,(this.vue.$store.state.difficulty<0?this.vue.$store.state.CONSTANTS.TUTORIAL_MAP_HEIGHT:this.vue.$store.state.CONSTANTS.MAP_HEIGHT)*this.vue.$store.state.CONSTANTS.TILE_SIZE+(r>n?0:.2*n))),this.vue.$store.state.difficulty<0)o=this.vue.$store.state.CONSTANTS.TUTORIAL_MAP;else{(o=new Array(this.vue.$store.state.CONSTANTS.MAP_WIDTH*this.vue.$store.state.CONSTANTS.MAP_HEIGHT)).fill(0);for(var h=this.vue.$store.state.CONSTANTS.NUM_ROWS;--h>=0;)for(var u=Math.floor(h*this.vue.$store.state.CONSTANTS.MAP_HEIGHT/this.vue.$store.state.CONSTANTS.NUM_ROWS)+Math.floor(Math.random()*(this.vue.$store.state.CONSTANTS.MAP_HEIGHT/this.vue.$store.state.CONSTANTS.NUM_ROWS-this.vue.$store.state.CONSTANTS.ROW_THICKNESS)),d=this.vue.$store.state.CONSTANTS.MAP_WIDTH;--d>=0;){for(var c=this.vue.$store.state.CONSTANTS.ROW_THICKNESS;--c>=0;)u+c>=this.vue.$store.state.CONSTANTS.MAP_HEIGHT||(o[(u+c)*this.vue.$store.state.CONSTANTS.MAP_WIDTH+d]=15);u=Math.max(0,Math.min(this.vue.$store.state.CONSTANTS.MAP_HEIGHT-1,u+Math.floor(3*Math.random())-1))}for(var p=this.vue.$store.state.CONSTANTS.NUM_COLS;--p>=0;)for(var m=Math.floor(p*this.vue.$store.state.CONSTANTS.MAP_WIDTH/this.vue.$store.state.CONSTANTS.NUM_COLS)+Math.floor(Math.random()*(this.vue.$store.state.CONSTANTS.MAP_WIDTH/this.vue.$store.state.CONSTANTS.NUM_COLS-this.vue.$store.state.CONSTANTS.COL_THICKNESS)),g=this.vue.$store.state.CONSTANTS.MAP_HEIGHT;--g>=0;){for(var T=this.vue.$store.state.CONSTANTS.COL_THICKNESS;--T>=0;)m+T>=this.vue.$store.state.CONSTANTS.MAP_WIDTH||(o[g*this.vue.$store.state.CONSTANTS.MAP_WIDTH+m+T]=15);m=Math.max(0,Math.min(this.vue.$store.state.CONSTANTS.MAP_WIDTH-1,m+Math.floor(3*Math.random())-1))}for(var f=this.vue.$store.state.CONSTANTS.MAP_HEIGHT;--f>=0;)for(var y=this.vue.$store.state.CONSTANTS.MAP_WIDTH;--y>=0;){var N=f*this.vue.$store.state.CONSTANTS.MAP_WIDTH+y;f>0&&y>0&&15===o[(f-1)*this.vue.$store.state.CONSTANTS.MAP_WIDTH+y-1]&&(o[N]|=1),f>0&&y<this.vue.$store.state.CONSTANTS.MAP_WIDTH-1&&15===o[(f-1)*this.vue.$store.state.CONSTANTS.MAP_WIDTH+y+1]&&(o[N]|=2),f<this.vue.$store.state.CONSTANTS.MAP_HEIGHT-1&&y>0&&15===o[(f+1)*this.vue.$store.state.CONSTANTS.MAP_WIDTH+y-1]&&(o[N]|=4),f<this.vue.$store.state.CONSTANTS.MAP_HEIGHT-1&&y<this.vue.$store.state.CONSTANTS.MAP_WIDTH-1&&15===o[(f+1)*this.vue.$store.state.CONSTANTS.MAP_WIDTH+y+1]&&(o[N]|=8),f>0&&15===o[(f-1)*this.vue.$store.state.CONSTANTS.MAP_WIDTH+y]&&(o[N]|=3),f<this.vue.$store.state.CONSTANTS.MAP_HEIGHT-1&&15===o[(f+1)*this.vue.$store.state.CONSTANTS.MAP_WIDTH+y]&&(o[N]|=12),y>0&&15===o[f*this.vue.$store.state.CONSTANTS.MAP_WIDTH+y-1]&&(o[N]|=5),y<this.vue.$store.state.CONSTANTS.MAP_WIDTH-1&&15===o[f*this.vue.$store.state.CONSTANTS.MAP_WIDTH+y+1]&&(o[N]|=10)}for(var S=o.length;--S>=0;)o[S]=15&~o[S],++o[S]}this.tilemap=new l.a.me.TMXTileMap("orthogonal",{width:this.vue.$store.state.difficulty<0?this.vue.$store.state.CONSTANTS.TUTORIAL_MAP_WIDTH:this.vue.$store.state.CONSTANTS.MAP_WIDTH,height:this.vue.$store.state.difficulty<0?this.vue.$store.state.CONSTANTS.TUTORIAL_MAP_HEIGHT:this.vue.$store.state.CONSTANTS.MAP_HEIGHT,tilewidth:64,tileheight:64,orientation:"orthogonal",properties:{background_color:"#000000"},layers:[{data:o,width:this.vue.$store.state.difficulty<0?this.vue.$store.state.CONSTANTS.TUTORIAL_MAP_WIDTH:this.vue.$store.state.CONSTANTS.MAP_WIDTH,height:this.vue.$store.state.difficulty<0?this.vue.$store.state.CONSTANTS.TUTORIAL_MAP_HEIGHT:this.vue.$store.state.CONSTANTS.MAP_HEIGHT,name:"terrain",opacity:1,type:"tilelayer",visible:!0,x:0,y:0}],tilesets:[{firstgid:1,image:"tiles",imageheight:64,imagewidth:1024,margin:0,name:"terrain",properties:{},spacing:0,tilewidth:this.vue.$store.state.CONSTANTS.TILE_SIZE,tileheight:this.vue.$store.state.CONSTANTS.TILE_SIZE,tileoffset:{x:0,y:0}}],version:1}),this.tilemap.addTo(l.a.me.game.world,!0),this.vue.$set(this,"player",[]);var A=this.tilemap.getLayers()[0],O=[],w=new l.a.me.Vector2d(Math.floor(this.tilemap.cols/2),Math.floor(this.tilemap.rows/2)),I=this.tilemap.getRenderer().tileToPixelCoords(w.x,w.y);if(1!==A.getTile(I.x,I.y)){for(var x=1;O.length<=0;++x)for(var _=-x;_<=x;++_){var b=w.y+_;if(_===-x||_===x)for(var M=-x;M<=x;++M){var U=w.x+M;if(!(b<0||b>=this.tilemap.rows||U<0||U>=this.tilemap.cols)){var P=this.tilemap.getRenderer().tileToPixelCoords(U,b);1===A.getTile(P.x,P.y).tileId&&O.push(new l.a.me.Vector2d(U,b))}}else{var D=w.x-x;if(b>=0&&b<this.tilemap.rows&&D>=0){var k=this.tilemap.getRenderer().tileToPixelCoords(D,b);1===A.getTile(k.x,k.y).tileId&&O.push(new l.a.me.Vector2d(D,b))}if(D=w.x+x,b>=0&&b<this.tilemap.rows&&D<this.tilemap.cols){var B=this.tilemap.getRenderer().tileToPixelCoords(D,b);1===A.getTile(B.x,B.y).tileId&&O.push(new l.a.me.Vector2d(D,b))}}}w=O[Math.floor(Math.random()*O.length)]}this.vue.$store.commit("oxygen",this.vue.$store.state.oxygen+this.vue.$store.state.CONSTANTS.ERYTHROCYTE_OXYGEN_REQUIRED);var V=new v.a({tilemap:this.tilemap,mapCoords:w});V.health=V.maxHealth,V.setOpacity(1);var G=w;if(O=[],w=new l.a.me.Vector2d(Math.floor(this.tilemap.cols/2),Math.floor(this.tilemap.rows/2)),I=this.tilemap.getRenderer().tileToPixelCoords(w.x,w.y),1!==A.getTile(I.x,I.y)){for(var Y=1;O.length<=0;++Y)for(var F=-Y;F<=Y;++F){var W=w.y+F;if(F===-Y||F===Y)for(var z=-Y;z<=Y;++z){var K=w.x+z;if(!(W<0||W>=this.tilemap.rows||K<0||K>=this.tilemap.cols)){var Z=this.tilemap.getRenderer().tileToPixelCoords(K,W),J=A.getTile(Z.x,Z.y).tileId;1!==J&&16!==J&&O.push(new l.a.me.Vector2d(K,W))}}else{var j=w.x-Y;if(W>=0&&W<this.tilemap.rows&&j>=0){var tt=this.tilemap.getRenderer().tileToPixelCoords(j,W),et=A.getTile(tt.x,tt.y).tileId;1!==et&&16!==et&&O.push(new l.a.me.Vector2d(j,W))}if(j=w.x+Y,W>=0&&W<this.tilemap.rows&&j<this.tilemap.cols){var it=this.tilemap.getRenderer().tileToPixelCoords(j,W),st=A.getTile(it.x,it.y).tileId;1!==st&&16!==st&&O.push(new l.a.me.Vector2d(j,W))}}}w=O[Math.floor(Math.random()*O.length)]}this.vue.$store.commit("oxygen",this.vue.$store.state.oxygen+this.vue.$store.state.CONSTANTS.PULMONARY_ARTERY_OXYGEN_REQUIRED);var at=new R.default({tilemap:this.tilemap,mapCoords:w});at.health=at.maxHealth,at.constructed=!0,at.setOpacity(1),this.pulmonaryArteries.push(at);var ot=w,lt=null;if(this.vue.$store.state.difficulty>=0&&this.vue.$store.state.difficulty<2){if(O=[],w=new l.a.me.Vector2d(Math.floor(this.tilemap.cols/2),Math.floor(this.tilemap.rows/2)),I=this.tilemap.getRenderer().tileToPixelCoords(w.x,w.y),1!==A.getTile(I.x,I.y)||I.x===ot.x&&I.y===ot.y){for(var ut=1;O.length<=0;++ut)for(var ct=-ut;ct<=ut;++ct){var pt=w.y+ct;if(ct===-ut||ct===ut)for(var mt=-ut;mt<=ut;++mt){var gt=w.x+mt;if(!(pt<0||pt>=this.tilemap.rows||gt<0||gt>=this.tilemap.cols)){var Tt=this.tilemap.getRenderer().tileToPixelCoords(gt,pt),ft=A.getTile(Tt.x,Tt.y).tileId;1!==ft&&16!==ft&&gt!==ot.x&&pt!==ot.y&&O.push(new l.a.me.Vector2d(gt,pt))}}else{var yt=w.x-ut;if(pt>=0&&pt<this.tilemap.rows&&yt>=0){var vt=this.tilemap.getRenderer().tileToPixelCoords(yt,pt),Nt=A.getTile(vt.x,vt.y).tileId;1!==Nt&&16!==Nt&&yt!==ot.x&&pt!==ot.y&&O.push(new l.a.me.Vector2d(yt,pt))}if(yt=w.x+ut,pt>=0&&pt<this.tilemap.rows&&yt<this.tilemap.cols){var St=this.tilemap.getRenderer().tileToPixelCoords(yt,pt),Ct=A.getTile(St.x,St.y).tileId;1!==Ct&&16!==Ct&&yt!==ot.x&&pt!==ot.y&&O.push(new l.a.me.Vector2d(yt,pt))}}}w=O[Math.floor(Math.random()*O.length)]}this.vue.$store.commit("oxygen",this.vue.$store.state.oxygen+this.vue.$store.state.CONSTANTS.BONE_MARROW_OXYGEN_REQUIRED);var At=new E({tilemap:this.tilemap,mapCoords:w});At.health=At.maxHealth,At.constructed=!0,At.setOpacity(1),lt=w}var Ot=null;if(this.vue.$store.state.difficulty<1){O=[],w=ot;for(var wt=this.vue.$store.state.CONSTANTS.BUILD_RESTRICTION_RADIUS+1;O.length<=0;++wt)for(var It=-wt;It<=wt;++It){var xt=w.y+It;if(It===-wt||It===wt)for(var _t=-wt;_t<=wt;++_t){var $t=w.x+_t;if(!(xt<0||xt>=this.tilemap.rows||$t<0||$t>=this.tilemap.cols)){var bt=this.tilemap.getRenderer().tileToPixelCoords($t,xt),Et=A.getTile(bt.x,bt.y).tileId;1===Et||16===Et||lt&&($t===lt.x||xt===lt.y)||$t===ot.x||xt===ot.y||O.push(new l.a.me.Vector2d($t,xt))}}else{var Rt=w.x-wt;if(xt>=0&&xt<this.tilemap.rows&&Rt>=0){var Lt=this.tilemap.getRenderer().tileToPixelCoords(Rt,xt),Mt=A.getTile(Lt.x,Lt.y).tileId;1===Mt||16===Mt||lt&&(Rt===lt.x||xt===lt.y)||Rt===ot.x||xt===ot.y||O.push(new l.a.me.Vector2d(Rt,xt))}if(Rt=w.x+wt,xt>=0&&xt<this.tilemap.rows&&Rt<this.tilemap.cols){var Ut=this.tilemap.getRenderer().tileToPixelCoords(Rt,xt),Pt=A.getTile(Ut.x,Ut.y).tileId;1===Pt||16===Pt||lt&&(Rt===lt.x||xt===lt.y)||Rt===ot.x||xt===ot.y||O.push(new l.a.me.Vector2d(Rt,xt))}}}w=O[Math.floor(Math.random()*O.length)],this.vue.$store.commit("oxygen",this.vue.$store.state.oxygen+this.vue.$store.state.CONSTANTS.CAPILLARIES_OXYGEN_REQUIRED);var Dt=new L.default({tilemap:this.tilemap,mapCoords:w});Dt.health=Dt.maxHealth,Dt.constructed=!0,Dt.setOpacity(1),this.capillaries.push(Dt),Ot=w}this.vue.$store.commit("oxygen",this.vue.$store.state.oxygen+this.vue.$store.state.CONSTANTS.PHAGOCYTE_OXYGEN_REQUIRED);var kt=new $({tilemap:this.tilemap,mapCoords:new l.a.me.Vector2d(0,0)});this.select(kt),kt.die(),this.vue.$set(this,"viruses",[]),this.goalIndicator=new rt(this.tilemap),this.selectionBox=new nt(this.tilemap),this.scrollX=0,this.scrollY=0,this.mouseDragged=!1,this.mouseDownLastX=0,this.mouseDownLastY=0,this.mouseDown=!1,this.toConstruct=null,this.wasConstructing=!1,l.a.me.input.registerPointerEvent("pointermove",l.a.me.game.viewport,(function(e){if(!t.mouseDown){var i=l.a.me.video.renderer.getWidth(),s=l.a.me.video.renderer.getHeight();return e.gameScreenX<20?t.scrollX=-5:e.gameScreenX>=i-(i>s?.2*i:0)-20?t.scrollX=5:t.scrollX=0,void(e.gameScreenY<20?t.scrollY=-5:e.gameScreenY>=s-(i>s?0:.2*s)-20?t.scrollY=5:t.scrollY=0)}t.mouseDownLastX===e.gameScreenX&&t.mouseDownLastY===e.gameScreenY||("scroll"===t.dragMode?(l.a.me.game.viewport.move(t.mouseDownLastX-e.gameScreenX,t.mouseDownLastY-e.gameScreenY),l.a.me.game.repaint()):t.selectionBox.moveDrag(l.a.me.game.viewport.localToWorld(e.gameScreenX,e.gameScreenY)),t.mouseDragged=!0,t.mouseDownLastX=e.gameScreenX,t.mouseDownLastY=e.gameScreenY)})),l.a.me.input.registerPointerEvent("pointerleave",l.a.me.game.viewport,(function(e){t.scrollX=0,t.scrollY=0})),l.a.me.input.registerPointerEvent("pointerdown",l.a.me.game.viewport,(function(e){if(t.mouseDown=!0,t.mouseDownLastX=e.gameScreenX,t.mouseDownLastY=e.gameScreenY,t.toConstruct){t.mouseDragged=!1,t.vue.$refs.toolbar.isConstructing=null,t.wasConstructing=!0;try{var i=l.a.me.game.viewport.localToWorld(e.gameScreenX,e.gameScreenY),s=t.tilemap.getRenderer().pixelToTileCoords(i.x,i.y);s.x=Math.floor(s.x),s.y=Math.floor(s.y),new t.toConstruct({tilemap:t.tilemap,mapCoords:s,redBloodCells:t.selected.filter((function(t){return t instanceof v.a}))})}catch(e){t.vue.$q.notify({message:e,position:"top"})}t.toConstruct=null}"select"===t.dragMode&&t.selectionBox.startDrag(l.a.me.game.viewport.localToWorld(e.gameScreenX,e.gameScreenY))})),l.a.me.input.registerPointerEvent("pointerup",l.a.me.game.viewport,(function(e){if(t.mouseDown=!1,t.wasConstructing)t.wasConstructing=!1;else{var i=l.a.me.game.viewport.localToWorld(e.gameScreenX,e.gameScreenY);if(!t.mouseDragged||"select"===t.dragMode&&t.selectionBox.startDragPos&&Math.abs(i.x-t.selectionBox.startDragPos.x)<=4&&Math.abs(i.y-t.selectionBox.startDragPos.y)<=4){if(t.selectionBox.cancelDrag(),t.vue.$store.state.paused)return;var s=t.tilemap.getRenderer().pixelToTileCoords(i.x,i.y);if(s.x=Math.floor(s.x),s.y=Math.floor(s.y),!Array.isArray(t.entityList[s.x+","+s.y])||t.entityList[s.x+","+s.y].length<=0){var a=t.selected.filter((function(t){return t instanceof C.a}));a.length>0?(a.forEach((function(t){t.setTarget(null),t.setGoal(s)})),l.a.me.audio.play("moving",!1,null,t.vue.$store.state.soundVolume/100),t.goalIndicator.show(s)):t.vue.$q.notify({message:"No Blood Cells selected.",position:"top"})}}else"select"===t.dragMode&&t.selectionBox.endDrag(l.a.me.game.viewport.localToWorld(e.gameScreenX,e.gameScreenY));t.mouseDragged=!1}})),l.a.me.input.bindKey(l.a.me.input.KEY.UP,"scrollUp"),l.a.me.input.bindKey(l.a.me.input.KEY.DOWN,"scrollDown"),l.a.me.input.bindKey(l.a.me.input.KEY.LEFT,"scrollLeft"),l.a.me.input.bindKey(l.a.me.input.KEY.RIGHT,"scrollRight"),l.a.me.event.subscribe(l.a.me.event.KEYDOWN,(function(e,i,s){switch(e){case"scrollUp":t.scrollY=-5;break;case"scrollDown":t.scrollY=5;break;case"scrollLeft":t.scrollX=-5;break;case"scrollRight":t.scrollX=5}})),l.a.me.event.subscribe(l.a.me.event.KEYUP,(function(e,i,s){switch(e){case"scrollUp":case"scrollDown":t.scrollY=0;break;case"scrollLeft":case"scrollRight":t.scrollX=0}})),l.a.me.timer.setInterval((function(){0===t.scrollX&&0===t.scrollY||(l.a.me.game.viewport.move(t.scrollX,t.scrollY),l.a.me.game.repaint())}),30),this.dragMode=this.vue.$q.platform.is.mobile?"scroll":"select",this.toConstruct=null;var Bt=G.clone();Bt.x+=ot.x,Bt.y+=ot.y;var Ht=2;lt&&(Bt.x+=lt.x,Bt.y+=lt.y,++Ht),Ot&&(Bt.x+=Ot.x,Bt.y+=Ot.y,++Ht),Bt.x/=Ht,Bt.y/=Ht,l.a.me.game.viewport.move(Bt.x*this.vue.$store.state.CONSTANTS.TILE_SIZE-(r>n?.4*r:.5*r),Bt.y*this.vue.$store.state.CONSTANTS.TILE_SIZE-(r>n?.5*n:.4*n)),this.vue.$refs.toolbar.resetVars(),this.vue.$store.state.difficulty>=0?(this.vue.$refs.toolbar.disableBuildBoneMarrow=!1,this.vue.$refs.toolbar.disableBuildPulmonaryArtery=!1,this.vue.$refs.toolbar.disableBuildCapillaries=!1,this.vue.$refs.toolbar.disableBuildErythrocyte=!1,this.vue.$refs.toolbar.disableBuildPhagocyte=!1,this.vue.$refs.toolbar.disableBuildLymphocyte=!1,this.vue.$store.state.CONSTANTS.WELCOME_MESSAGE&&this.vue.$q.notify({message:this.vue.$store.state.CONSTANTS.WELCOME_MESSAGE,position:"top"}),this.vue.$store.commit("pendingSars",this.vue.$store.state.CONSTANTS.SARS_COUNT),this.vue.$store.commit("pendingMers",this.vue.$store.state.CONSTANTS.MERS_COUNT),this.vue.$store.commit("pendingCovid",this.vue.$store.state.CONSTANTS.COVID_COUNT),this.vue.$refs.toolbar.startTimer(this.vue.$store.state.CONSTANTS.PREPARATION_TIME)):(this.tutorialVars.currentStep=0,this.tutorialSteps=[function(){t.vue.$refs.toolbar.disableBuildBoneMarrow=!0,t.vue.$refs.toolbar.disableBuildPulmonaryArtery=!0,t.vue.$refs.toolbar.disableBuildCapillaries=!0,t.vue.$refs.toolbar.disableBuildErythrocyte=!0,t.vue.$refs.toolbar.disableBuildPhagocyte=!0,t.vue.$refs.toolbar.disableBuildLymphocyte=!0,t.hideTutorialNotification=t.vue.$q.notify({message:t.tutorialVars.currentStep+1+'. Welcome to the tutorial! The objective of the game is to kill all Viruses by attacking them with your White Blood Cells. To begin, click on the Red Blood Cell, also known as Erythrocyte <img src="'+ht.a+'" width="16" height="16"/>, to select it. A white circle appears around selected units.',timeout:0,position:"top",html:!0}),new Promise((function(e){return t.tutorialVars.selectRedBloodCellResolve=e})).then(t.tutorialSteps[++t.tutorialVars.currentStep])},function(){t.hideTutorialNotification&&t.hideTutorialNotification(),t.hideTutorialNotification=t.vue.$q.notify({message:t.tutorialVars.currentStep+1+". Erythrocytes collect Oxygen as well as build Organs. Oxygen is needed for building Organs and Blood Cells. Let's go collect some oxygen. Click on the Pulmonary Artery <img src=\""+Q.a+'" width="16" height="16"> to collect Oxygen.',timeout:0,position:"top",html:!0}),new Promise((function(e){return t.tutorialVars.collectOxygenResolve=e})).then(t.tutorialSteps[++t.tutorialVars.currentStep])},function(){t.hideTutorialNotification&&t.hideTutorialNotification(),t.hideTutorialNotification=t.vue.$q.notify({message:t.tutorialVars.currentStep+1+'. Your Erythrocyte will now automatically head to the Capillaries <img src="'+H.a+'" width="16" height="16"/> to deposit the oxygen.',timeout:0,position:"top",html:!0}),new Promise((function(e){return t.tutorialVars.depositOxygenResolve=e})).then(t.tutorialSteps[++t.tutorialVars.currentStep])},function(){t.hideTutorialNotification&&t.hideTutorialNotification(),V.setTarget(null),V.selected?t.tutorialSteps[++t.tutorialVars.currentStep]():(t.hideTutorialNotification=t.vue.$q.notify({message:t.tutorialVars.currentStep+1+'. Click on your Erythrocyte <img src="'+ht.a+'" width="16" height="16"/> to select it again.',timeout:0,position:"top",html:!0}),new Promise((function(e){return t.tutorialVars.selectRedBloodCell=e})).then(t.tutorialSteps[++t.tutorialVars.currentStep]))},function(){t.hideTutorialNotification&&t.hideTutorialNotification(),t.vue.$refs.toolbar.disableBuildBoneMarrow=!1,t.vue.$store.commit("oxygen",t.vue.$store.state.CONSTANTS.BONE_MARROW_OXYGEN_REQUIRED),t.hideTutorialNotification=t.vue.$q.notify({message:t.tutorialVars.currentStep+1+'. In this tutorial, the Pulmonary Artery and Capillaries are pre-built for you, but you may have to build them in an actual game. Now let\'s build Bone Marrow, which creates Blood Cells. Click on the "Build Bone Marrow" button.',timeout:0,position:"top",html:!0}),new Promise((function(e){return t.tutorialVars.buildBoneMarrowButtonResolve=e})).then(t.tutorialSteps[++t.tutorialVars.currentStep])},function(){t.hideTutorialNotification&&t.hideTutorialNotification(),V.setTarget(null),t.hideTutorialNotification=t.vue.$q.notify({message:t.tutorialVars.currentStep+1+'. Click on a Blood Vessel Wall <img src="'+dt.a+'" width="16" height="16"/> to build your Bone Marrow there. Organs can only be built at Blood Vessel Walls.',timeout:0,position:"top",html:!0}),new Promise((function(e){return t.tutorialVars.buildBoneMarrowResolve=e})).then(t.tutorialSteps[++t.tutorialVars.currentStep])},function(){t.hideTutorialNotification&&t.hideTutorialNotification(),V.setTarget(null),t.hideTutorialNotification=t.vue.$q.notify({message:t.tutorialVars.currentStep+1+". You need to have empty space around your Bone Marrow to create a new Blood Cell. If another Blood Cell is blocking the way, move it away by clicking on the Blood Cell then clicking another location in a Blood Vessel (the bright red portions of the map). Next, click on your Bone Marrow to select it.",timeout:0,position:"top",html:!0}),new Promise((function(e){return t.tutorialVars.selectBoneMarrowResolve=e})).then(t.tutorialSteps[++t.tutorialVars.currentStep])},function(){t.hideTutorialNotification&&t.hideTutorialNotification(),t.vue.$refs.toolbar.disableBuildBoneMarrow=!0,t.vue.$refs.toolbar.disableBuildPhagocyte=!1,t.vue.$store.commit("oxygen",t.vue.$store.state.CONSTANTS.PHAGOCYTE_OXYGEN_REQUIRED),t.hideTutorialNotification=t.vue.$q.notify({message:t.tutorialVars.currentStep+1+'. Phagocytes are a fast moving melee unit that go right up to the Viruses to destroy them. Click Build Phagocyte to build a Phagocyte <img src="'+X.a+'" width="16" height="16"/>. Note that you cannot build more Blood Cells or Organs than your maximum limit, which depends on the game difficulty.',timeout:0,position:"top",html:!0}),new Promise((function(e){return t.tutorialVars.buildPhagocyteResolve=e})).then(t.tutorialSteps[++t.tutorialVars.currentStep])},function(){t.hideTutorialNotification&&t.hideTutorialNotification(),t.vue.$refs.toolbar.disableBuildPhagocyte=!0,t.vue.$refs.toolbar.disableBuildLymphocyte=!1,t.vue.$store.commit("oxygen",t.vue.$store.state.CONSTANTS.LYMPHOCYTE_OXYGEN_REQUIRED),t.hideTutorialNotification=t.vue.$q.notify({message:t.tutorialVars.currentStep+1+'. Lymphocytes are a slower moving ranged unit that shoot Antibodies at Viruses. Click on Build Lymphocyte to build a Lymphocyte <img src="'+q.a+'" width="16" height="16"/>.',timeout:0,position:"top",html:!0}),new Promise((function(e){return t.tutorialVars.buildLymphocyteResolve=e})).then(t.tutorialSteps[++t.tutorialVars.currentStep])},function(){t.hideTutorialNotification&&t.hideTutorialNotification(),t.vue.$refs.toolbar.disableBuildLymphocyte=!0,t.hideTutorialNotification=t.vue.$q.notify({message:t.tutorialVars.currentStep+1+". Now we will need to drag to select the White Blood Cells so that we can order them to attack Viruses. Click on Drag to Select at the bottom right corner of the screen.",timeout:0,position:"top",html:!0}),new Promise((function(e){return t.tutorialVars.dragToSelectButtonResolve=e})).then(t.tutorialSteps[++t.tutorialVars.currentStep])},function(){t.hideTutorialNotification&&t.hideTutorialNotification(),t.hideTutorialNotification=t.vue.$q.notify({message:t.tutorialVars.currentStep+1+'. Now drag across the screen to select the Phagocyte <img src="'+X.a+'" width="16" height="16"/> and Lymphocyte <img src="'+q.a+'" width="16" height="16"/>. Once they are selected, the infection countdown will start.',timeout:0,position:"top",html:!0}),new Promise((function(e){return t.tutorialVars.selectWhiteBloodCellsResolve=e})).then(t.tutorialSteps[++t.tutorialVars.currentStep])},function(){t.hideTutorialNotification&&t.hideTutorialNotification(),t.hideTutorialNotification=t.vue.$q.notify({message:t.tutorialVars.currentStep+1+". Time for battle! Watch the countdown timer at the top left of the screen. When the countdown timer ends, the number of pending infections will be shown and Viruses will spawn until there are no more pending infections. You must kill all Viruses to win. When the Virus appears, click on it (with your White Blood Cells selected) to kill it!",timeout:0,position:"top",html:!0}),t.vue.$store.commit("pendingSars",0),t.vue.$store.commit("pendingMers",0),t.vue.$store.commit("pendingCovid",1),t.vue.$refs.toolbar.startTimer(t.vue.$store.state.CONSTANTS.TUTORIAL_PREPARATION_TIME),new Promise((function(e){return t.tutorialVars.tutorialEndedResolve=e})).then(t.tutorialSteps[++t.tutorialVars.currentStep])},function(){t.hideTutorialNotification(),t.tutorialVars={}}],this.tutorialSteps[0]())},select:function(t){var e;(this.selected.forEach((function(t){t.selected&&(t.selectionStateChanged=!0,t.selected=!1)})),this.selected.length=0,this.selectedBuilding&&(this.selectedBuilding.selectionStateChanged=!0,this.selectedBuilding.selected=!1,this.selectedBuilding=null),Array.isArray(t))?(t=t.filter((function(t){return t.getOpacity()>=1})),(e=this.selected).push.apply(e,S()(t)),t.forEach((function(t){t.selectionStateChanged=!0,t.selected=!0}))):t&&t.getOpacity()>=1&&(this.selected.push(t),t.selectionStateChanged=!0,t.selected=!0);this.selected.findIndex((function(t){return t instanceof v.a}))>=0?(this.vue.$refs.toolbar.showing="constructionOptions",this.tutorialVars.selectRedBloodCellResolve&&this.tutorialVars.selectRedBloodCellResolve(),this.tutorialVars.selectWhiteBloodCellsResolve&&this.selected.findIndex((function(t){return t instanceof $}))>=0&&this.selected.findIndex((function(t){return t instanceof x}))>=0&&this.tutorialVars.selectWhiteBloodCellsResolve()):1===this.selected.length?(this.vue.$refs.toolbar.showing="singleUnitInfo",this.vue.$refs.toolbar.singleUnit=this.selected[0]):this.selected.length>1?(this.vue.$refs.toolbar.showing="multipleUnitInfo",this.vue.$refs.toolbar.multipleUnits=this.selected,this.tutorialVars.selectWhiteBloodCellsResolve&&this.selected.findIndex((function(t){return t instanceof $}))>=0&&this.selected.findIndex((function(t){return t instanceof x}))>=0&&this.tutorialVars.selectWhiteBloodCellsResolve()):this.vue.$refs.toolbar.showing=""},selectBuilding:function(t){this.selected.forEach((function(t){t.selected&&(t.selectionStateChanged=!0,t.selected=!1)})),this.selected.length=0,this.selectedBuilding&&(this.selectedBuilding.selectionStateChanged=!0,this.selectedBuilding.selected=!1),t.selectionStateChanged=!0,t.selected=!0,this.selectedBuilding=t,this.vue.$refs.toolbar.building=t,t instanceof E&&t.constructed?(this.vue.$refs.toolbar.showing="boneMarrowOptions",this.tutorialVars.selectBoneMarrowResolve&&this.tutorialVars.selectBoneMarrowResolve()):this.vue.$refs.toolbar.showing="buildingInfo"},attack:function(t){var e=this.selected.filter((function(e){return e.hostile(t)}));return e.length>0&&(e.forEach((function(e){return e.setTarget(t)})),!0)},build:function(t){this.toConstruct=t},startInfection:function(){var t=this,e=function(){if(!t.vue.$store.state.paused)if(t.vue.$store.state.pendingSars<=0&&t.vue.$store.state.pendingMers<=0&&t.vue.$store.state.pendingCovid<=0)l.a.me.timer.clearInterval(t.infectionInterval);else if(!(t.viruses.length>=t.vue.$store.state.CONSTANTS.VIRUS_LIMIT)){var e=[];t.vue.$store.state.pendingSars>0&&e.push("sars"),t.vue.$store.state.pendingMers>0&&e.push("mers"),t.vue.$store.state.pendingCovid>0&&e.push("covid");for(var i=e[Math.floor(Math.random()*e.length)],s=t.pulmonaryArteries.length>0?t.pulmonaryArteries[Math.floor(Math.random()*t.pulmonaryArteries.length)].mapCoords:new l.a.me.Vector2d(Math.floor(Math.random()*t.vue.$store.state.CONSTANTS.MAP_WIDTH),Math.floor(Math.random()*t.vue.$store.state.CONSTANTS.MAP_HEIGHT)),a=[],o=t.tilemap.getLayers()[0],r=1;a.length<=0;++r)for(var n=-r;n<=r;++n){var h=s.y+n;if(n===-r||n===r)for(var u=-r;u<=r;++u){var d=s.x+u;if(!(h<0||h>=t.tilemap.rows||d<0||d>=t.tilemap.cols)){var c=t.tilemap.getRenderer().tileToPixelCoords(d,h),p=d+","+h;1===o.getTile(c.x,c.y).tileId&&(!Array.isArray(t.entityList[p])||t.entityList[p].length<=0)&&a.push(new l.a.me.Vector2d(d,h))}}else{var m=s.x-r;if(h>=0&&h<t.tilemap.rows&&m>=0){var g=t.tilemap.getRenderer().tileToPixelCoords(m,h),T=m+","+h;1===o.getTile(g.x,g.y).tileId&&(!Array.isArray(t.entityList[T])||t.entityList[T].length<=0)&&a.push(new l.a.me.Vector2d(m,h))}if(m=s.x+r,h>=0&&h<t.tilemap.rows&&m<t.tilemap.cols){var f=t.tilemap.getRenderer().tileToPixelCoords(m,h),y=m+","+h;1===o.getTile(f.x,f.y).tileId&&(!Array.isArray(t.entityList[y])||t.entityList[y].length<=0)&&a.push(new l.a.me.Vector2d(m,h))}}}if(!(a.length<=0))switch(s=a[Math.floor(Math.random()*a.length)],i){case"sars":new M({tilemap:t.tilemap,mapCoords:s}),t.vue.$store.commit("pendingSars",t.vue.$store.state.pendingSars-1);break;case"mers":new U({tilemap:t.tilemap,mapCoords:s}),t.vue.$store.commit("pendingMers",t.vue.$store.state.pendingMers-1);break;case"covid":new P({tilemap:t.tilemap,mapCoords:s}),t.vue.$store.commit("pendingCovid",t.vue.$store.state.pendingCovid-1)}}};e(),this.infectionInterval=l.a.me.timer.setInterval(e,this.vue.$store.state.CONSTANTS.NEW_INFECTION_TIME)},stopInfection:function(){l.a.me.timer.clearInterval(this.infectionInterval)},onDestroyEvent:function(){this.stopInfection(),this.hideTutorialNotification&&this.hideTutorialNotification()}}),pt=i("fd17"),mt=i.n(pt),gt=i("892e"),Tt=i.n(gt),ft=i("17b5"),yt=(i("a374"),i("3b32"),i("90a1"),i("ac53"),i("81bc"),i("f677"),i("4ef6"),i("72ba"),i("6d2c"),i("1a3c"),i("965b"),i("cefe"),i("1ed8"),i("c7b9"),i("a972"),i("8d95"),i("e627"),i("a635"),i("3bed"),i("347e"),i("fb57"),i("74f0"),i("c061"),i("1788"),i("80aa"),{components:{toolbar:tt,dialog_ad:it,dialog_ad_rewarded:at},data:function(){var t=this;return{resources:[{name:"tiles",type:"image",src:mt.a},{name:"sprites",type:"image",src:Tt.a},{name:"attack",type:"audio",src:"media/"},{name:"bone_marrow_ready",type:"audio",src:"media/"},{name:"breathe_in",type:"audio",src:"media/"},{name:"breathe_out",type:"audio",src:"media/"},{name:"building_bone_marrow",type:"audio",src:"media/"},{name:"building_capillaries",type:"audio",src:"media/"},{name:"building_erythrocyte",type:"audio",src:"media/"},{name:"building_lymphocyte",type:"audio",src:"media/"},{name:"building_phagocyte",type:"audio",src:"media/"},{name:"building_pulmonary_artery",type:"audio",src:"media/"},{name:"capillaries_ready",type:"audio",src:"media/"},{name:"depositing_oxygen",type:"audio",src:"media/"},{name:"erythrocyte_ready",type:"audio",src:"media/"},{name:"gathering_oxygen",type:"audio",src:"media/"},{name:"hit",type:"audio",src:"media/"},{name:"lose",type:"audio",src:"media/"},{name:"lymphocyte_ready",type:"audio",src:"media/"},{name:"moving",type:"audio",src:"media/"},{name:"music",type:"audio",src:"media/",stream:!0},{name:"phagocyte",type:"audio",src:"media/"},{name:"phagocyte_ready",type:"audio",src:"media/"},{name:"pulmonary_artery_ready",type:"audio",src:"media/"},{name:"ranged",type:"audio",src:"media/"},{name:"virus",type:"audio",src:"media/"},{name:"win",type:"audio",src:"media/"}],loading_mounted:new Promise((function(e){return t.$store.commit("loading_mounted",e)})),quitDialogShown:!1,originalOuterWidth:0,originalOuterHeight:0}},methods:{loaded:function(){this.$store.commit("sprites",new l.a.me.video.renderer.Texture(ft,"sprites")),l.a.me.state.set(l.a.me.state.MENU,new ot(this)),l.a.me.state.set(l.a.me.state.PLAY,new ct(this)),l.a.me.state.transition("fade","#000000",250),l.a.me.state.change(l.a.me.state.MENU),this.$store.commit("melonjsAlreadyLoaded",!0),this.$store.commit("soundVolume",parseFloat(localStorage.getItem("soundVolume"))),isNaN(this.$store.state.soundVolume)&&(this.$store.commit("soundVolume",50),localStorage.setItem("soundVolume",50));var t=parseFloat(localStorage.getItem("musicVolume"));isNaN(t)&&(t=50,localStorage.setItem("musicVolume",50)),this.$store.commit("musicTrack",l.a.me.audio.playTrack("music",t/100)),this.$store.state.melonjs_loaded()},installApp:function(){this.$q.platform.is.android?window.open("market://details?id=com.customautosys.covidgame"):window.open("https://customautosys.com/products.html?covidgame")},disallowResize:function(t){return window.resizeTo(this.originalOuterWidth,this.originalOuterHeight),t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),!1},fullScreenChanged:function(){null!==document.fullscreenElement?(this.$store.commit("fullscreen",!0),localStorage.setItem("fullscreen",!0)):(this.$store.commit("fullscreen",!1),localStorage.removeItem("fullscreen"))},beforeUnload:function(t){var e=this;return r()(a.a.mark((function i(){return a.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:i.next=8;break;case 5:0,i.next=13;break;case 8:if(e.$store.state.quitFromMenu){i.next=13;break}return t.preventDefault(),t.returnValue=!1,i.next=13,e.$refs.dialog_ad.show();case 13:case"end":return i.stop()}}),i)})))()}},mounted:function(){var t=this;return r()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return history.pushState(null,document.title,document.URL),window.addEventListener("popstate",(function(e){return t.$router.back(),e.preventDefault(),!1})),document.addEventListener("fullscreenchange",t.fullScreenChanged),localStorage.getItem("fullscreen")&&document.documentElement.requestFullscreen(),window.addEventListener("beforeunload",t.beforeUnload),t.$store.commit("CONSTANTS",t.$store.state.GENERAL_CONSTANTS),e.next=7,t.loading_mounted;case 7:l.a.me.device.onReady((function(){l.a.me.video.init(Math.max(1,t.$refs.screen.clientWidth),Math.max(1,t.$refs.screen.clientHeight),{wrapper:"screen",scale:"auto",scaleMethod:"flex",renderer:l.a.me.video.AUTO,useParentDOMSize:!0}),l.a.me.audio.init("mp3"),l.a.me.loader.preload(t.resources,t.loaded.bind(t))}));case 8:case"end":return e.stop()}}),e)})))()},beforeRouteUpdate:function(t,e,i){var s=this;if("/submit_high_score"===e.path&&this.$refs.routerView.submitting)return this.$q.dialog({message:"Sorry, your high score is still being submitted."}),void i(!1);if("/high_scores"===e.path)return this.$refs.dialog_ad.show(),void i();if("/"===t.path&&"/"!==e.path){if(this.quitDialogShown)return;return this.quitDialogShown=!0,this.$q.dialog({message:"Are you sure you want to quit?",ok:{label:"Yes",noCaps:!0,dense:!0,outline:!0,color:"white",textColor:"white",size:"xs"},cancel:{label:"No",noCaps:!0,glossy:!0,push:!0,size:"lg"}}).onOk((function(){return s.$refs.dialog_ad.show().then(navigator.app.exitApp)})).onCancel((function(){s.$refs.dialog_ad.show(),s.quitDialogShown=!1})),void i(!1)}if(i(),this.$forceUpdate(),"/play"===t.path)return this.originalOuterWidth=window.outerWidth,this.originalOuterHeight=window.outerHeight,window.addEventListener("resize",this.disallowResize),void l.a.me.state.change(l.a.me.state.PLAY);"/play"===e.path&&window.removeEventListener("resize",this.disallowResize),l.a.me.state.change(l.a.me.state.MENU)}}),vt=(i("f4e4"),Object(T.a)(yt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"main"}},[s("div",{ref:"screen",attrs:{id:"screen"}}),s("q-layout",{style:t.$route.path.includes("play")?"display:none":"",attrs:{id:"overlay"}},[s("q-page-container",[s("router-view",{ref:"routerView"})],1)],1),s("toolbar",{ref:"toolbar",style:t.$route.path.includes("play")?"":"display:none"}),"/play"!==t.$route.path&&(t.$q.platform.is.android&&!t.$q.platform.is.cordova||t.$q.platform.is.desktop&&!t.$q.platform.is.electron&&!t.$q.platform.is.bex)?s("q-btn",{staticClass:"installApp",attrs:{color:"red-10",glossy:"",push:"","no-caps":""},on:{click:t.installApp}},[t._v("\n\t\tInstall App\n\t")]):t._e(),s("dialog_ad",{ref:"dialog_ad"}),s("dialog_ad_rewarded",{ref:"dialog_ad_rewarded"}),s("img",{staticStyle:{display:"none"},attrs:{src:i("ae3b")}}),s("img",{staticStyle:{display:"none"},attrs:{src:i("9ca5")}}),s("img",{staticStyle:{display:"none"},attrs:{src:i("5f38")}})],1)}),[],!1,null,"2835cebe",null));e.default=vt.exports},d47c:function(t,e,i){"use strict";var s=i("5e82");i.n(s).a},dd8e:function(t,e,i){},df47:function(t,e,i){"use strict";var s=i("22b4"),a=i.n(s);e.a=a.a.me.Renderable.extend({init:function(t){this.moveable=t,a.a.me.Renderable.prototype.init.apply(this,[t.pos.x,t.pos.y,.9*t.width,10]),this.positionUpdated=!1,a.a.me.game.world.addChild(this,2)},updatePosition:function(){this.pos&&this.moveable&&this.moveable.pos&&(this.pos.x=this.moveable.pos.x,this.pos.y=this.moveable.pos.y,this.positionUpdated=!0)},update:function(t){return a.a.me.Renderable.prototype.update.apply(this,[t])||this.positionUpdated},draw:function(t){var e=a.a.me.state.current();t.setColor(e.vue.$store.state.CONSTANTS.HEALTH_BAR_LOSS_COLOR),t.fillRect(this.pos.x+this.moveable.width/2,this.pos.y,this.width,this.height),t.setColor(e.vue.$store.state.CONSTANTS.HEALTH_BAR_HEALTH_COLOR),t.fillRect(this.pos.x+this.moveable.width/2,this.pos.y,this.width*this.moveable.health/this.moveable.maxHealth,this.height)}})},e1a6:function(t,e,i){"use strict";var s=i("4db1"),a=i.n(s),o=i("22b4"),r=i.n(o),n=i("cdea"),l=i("5128"),h=(i("0b21"),r.a.me.Sprite.extend({init:function(t){var e=r.a.me.state.current();this.redBloodCell=t,r.a.me.Sprite.prototype.init.apply(this,[t.pos.x,t.pos.y,{image:e.vue.$store.state.sprites,region:"oxygen",framewidth:e.vue.$store.state.CONSTANTS.TILE_SIZE,frameheight:e.vue.$store.state.CONSTANTS.TILE_SIZE,anchorPoint:new r.a.me.Vector2d(0,0)}]),this.updated=!1,this.lastUpdateTime=0,this.setOpacity(0),this.targetOpacity=0,this.oxygenGatherRate=e.vue.$store.state.CONSTANTS.OXYGEN_GATHER_RATE,r.a.me.game.world.addChild(this,2)},updatePosition:function(){this.pos&&this.redBloodCell&&this.redBloodCell.pos&&(this.pos.x=this.redBloodCell.pos.x,this.pos.y=this.redBloodCell.pos.y,this.updated=!0)},animateOpacity:function(t){this.targetOpacity=t,this.alwaysUpdate=!0},update:function(t){if(r.a.me.state.current().vue.$store.state.paused)return!1;var e=r.a.me.Sprite.prototype.update.apply(this,[t]);if(this.updated&&(e=!0),this.lastUpdateTime+=t,this.lastUpdateTime<30)return e;this.lastUpdateTime-=30;var i=this.getOpacity();return this.targetOpacity!==i?(this.setOpacity(Math.abs(this.targetOpacity-i)<this.oxygenGatherRate?this.targetOpacity:i+this.oxygenGatherRate*Math.sign(this.targetOpacity-i)),e=!0):this.alwaysUpdate=!1,e}})),u=n.a.extend({init:function(t){var e=r.a.me.state.current();this.oxygenRequired=e.vue.$store.state.CONSTANTS.ERYTHROCYTE_OXYGEN_REQUIRED,n.a.prototype.init.apply(this,[{tilemap:t.tilemap,image:e.vue.$store.state.sprites,region:"redBloodCell",framewidth:e.vue.$store.state.CONSTANTS.TILE_SIZE,frameheight:e.vue.$store.state.CONSTANTS.TILE_SIZE,anchorPoint:new r.a.me.Vector2d(0,0),mapCoords:t.mapCoords}]),this.maxHealth=e.vue.$store.state.CONSTANTS.ERYTHROCYTE_MAX_HEALTH,this.damageLower=0,this.damageUpper=0,this.shotInterval=0,this.speed=e.vue.$store.state.CONSTANTS.ERYTHROCYTE_SPEED,this.creationRate=e.vue.$store.state.CONSTANTS.ERYTHROCYTE_CREATION_RATE,this.doingSomething=!1,this.flipped=!1,this.flipFrame=0,this.constructing=null,this.oxygen=new h(this),this.hasOxygen=!1,this.lastClick=0},update:function(t){var e=r.a.me.state.current();if(e.vue.$store.state.paused)return!1;var s=!1;this.path.length>0||this.constructing?this.doingSomething=!0:this.doingSomething=!1,this.lastUpdateTime+t>=30&&(this.doingSomething?this.flipFrame?--this.flipFrame:(this.flipped=!this.flipped,this.flipFrame=15,this.sprite.flipX(this.flipped),s=!0):(this.flipFrame=0,this.flipped=!1,this.sprite.flipX(!1),s=!0));var a=i("91cd").default,o=i("3e86").default;if(!this.hasOxygen&&this.target instanceof a&&this.target.constructed&&this.target.redBloodCells.indexOf(this)<0&&Math.abs(this.mapCoords.x-this.target.mapCoords.x)<=1&&Math.abs(this.mapCoords.y-this.target.mapCoords.y)<=1){if(r.a.me.audio.play("breathe_in",!1,null,e.vue.$store.state.soundVolume/100),this.oxygen.animateOpacity(1),this.oxygen.getOpacity()>=1&&(this.hasOxygen=!0,e.tutorialVars.collectOxygenResolve&&e.tutorialVars.collectOxygenResolve(),e.capillaries.length>0)){for(var l=0,h=-1,u=e.capillaries.length;--u>=0;){var d=Math.pow(this.mapCoords.x-e.capillaries[u].mapCoords.x,2)+Math.pow(this.mapCoords.y-e.capillaries[u].mapCoords.y,2);if((!l||d<l)&&(h=u,(l=d)<=Math.SQRT2))break}this.setTarget(e.capillaries[h])}}else if(this.hasOxygen&&this.target instanceof o&&this.target.constructed&&this.target.redBloodCells.indexOf(this)<0&&Math.abs(this.mapCoords.x-this.target.mapCoords.x)<=1&&Math.abs(this.mapCoords.y-this.target.mapCoords.y)<=1&&(r.a.me.audio.play("breathe_out",!1,null,e.vue.$store.state.soundVolume/100),this.oxygen.animateOpacity(0),this.oxygen.getOpacity()<=0)){this.hasOxygen=!1;var c=r.a.me.state.current();if(c.pulmonaryArteries.length>0){for(var p=0,m=-1,g=c.pulmonaryArteries.length;--g>=0;){var T=Math.pow(this.mapCoords.x-c.pulmonaryArteries[g].mapCoords.x,2)+Math.pow(this.mapCoords.y-c.pulmonaryArteries[g].mapCoords.y,2);if((!p||T<p)&&(m=g,(p=T)<=Math.SQRT2))break}this.setTarget(c.pulmonaryArteries[m])}c.vue.$store.commit("oxygen",c.vue.$store.state.oxygen+1),c.tutorialVars.depositOxygenResolve&&c.tutorialVars.depositOxygenResolve()}return(s=n.a.prototype.update.apply(this,[t])||s)&&this.oxygen.updatePosition(),s},click:function(){var t=(new Date).getTime();if(t-this.lastClick>=300)return this.lastClick=t,void n.a.prototype.click.apply(this);this.lastClick=t;var e=r.a.me.state.current(),i=[],s=r.a.me.game.viewport.localToWorld(0,0),o=r.a.me.game.viewport.getWidth(),l=r.a.me.game.viewport.getHeight(),h=r.a.me.game.viewport.localToWorld(o>l?.8*o:o,o>l?l:.8*l),d=this.tilemap.getRenderer().pixelToTileCoords(s.x,s.y);d.x=Math.floor(d.x),d.y=Math.floor(d.y);var c=this.tilemap.getRenderer().pixelToTileCoords(h.x,h.y);c.x=Math.floor(c.x),c.y=Math.floor(c.y);for(var p=d.y;p<=c.y;++p)for(var m=d.x;m<=c.x;++m){var g=m+","+p;if(Array.isArray(this.entityList[g])){var T=this.entityList[g].filter((function(t){return t instanceof u}));T.length>0&&i.push.apply(i,a()(T))}}e.select(i)},setTarget:function(t){this.target instanceof l.a&&this.target.removeRedBloodCell(this),n.a.prototype.setTarget.apply(this,[t])},setGoal:function(t){var e=this.oxygen.getOpacity();e>0&&e<1&&(this.hasOxygen=!1,this.oxygen.animateOpacity(0)),n.a.prototype.setGoal.apply(this,[t])},die:function(){r.a.me.game.world.removeChild(this.oxygen),n.a.prototype.die.apply(this)}});e.a=u},e627:function(t,e,i){t.exports=i.p+"media/lymphocyte_ready.mp3"},f42d:function(t,e,i){},f4e4:function(t,e,i){"use strict";var s=i("dd8e");i.n(s).a},f677:function(t,e,i){t.exports=i.p+"media/building_capillaries.mp3"},fb57:function(t,e,i){t.exports=i.p+"media/phagocyte_ready.mp3"},fd17:function(t,e,i){t.exports=i.p+"img/tiles.png"}}]);