(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"96e8":function(e,t,n){"use strict";var a=n("af47");n.n(a).a},af47:function(e,t,n){},c428:function(e,t,n){"use strict";n.r(t);n("7f7f"),n("ac6a"),n("cadf"),n("456d");var a=n("8993"),r=n.n(a),s=(n("28a5"),n("967e")),o=n.n(s),i=(n("a481"),n("6762"),n("2fdb"),n("f559"),n("386d"),n("96cf"),n("fa84")),c=n.n(i),u=(n("551c"),n("06db"),n("81fa")),l=n.n(u),p=n("bc3a"),m=n.n(p),g=n("947b"),d=n.n(g),h=n("a26a"),f=n("4386"),b={data:function(){var e=this;return{melonjs_loaded:new Promise((function(t){return e.$store.commit("melonjs_loaded",t)}))}},methods:{checkSearchString:function(){var e=this;return c()(o.a.mark((function t(){var n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="",!h.a.getInstance().state||!h.a.getInstance().state.search){t.next=6;break}n=h.a.getInstance().state.search,h.a.getInstance().state.search="",t.next=22;break;case 6:if(!location.search.startsWith("?")){t.next=10;break}n=location.search,t.next=22;break;case 10:if(!window.plugins||!window.plugins.webintent){t.next=22;break}return t.prev=11,t.next=14,new Promise((function(e,t){return window.plugins.webintent.getUri((function(t){return e(t)}),(function(e){return t(e)}))}));case 14:n=t.sent,t.next=21;break;case 17:t.prev=17,t.t0=t.catch(11),console.log(t.t0),n="";case 21:n=null!==n&&n.includes("?")?n.substring(n.indexOf("?")):"";case 22:if(e.$store.state.melonjsAlreadyLoaded){t.next=25;break}return t.next=25,e.melonjs_loaded;case 25:if(!n.startsWith("?play=")||!e.$store.state.user){t.next=33;break}if(!((a=parseInt(n.substring(n.indexOf("=")+1)))>=-1&&a<e.$store.state.DIFFICULTY_CONSTANTS.length)){t.next=31;break}return e.$store.commit("difficulty",a),e.$router.replace("/play"),t.abrupt("return");case 31:t.next=50;break;case 33:if("?menu_new_game"!==n){t.next=38;break}return e.$router.replace("/menu_new_game"),t.abrupt("return");case 38:if("?settings"!==n){t.next=43;break}return e.$router.replace("/settings"),t.abrupt("return");case 43:if("?submit_high_score"!==n||!e.$store.state.user){t.next=48;break}return e.$router.replace("/submit_high_score"),t.abrupt("return");case 48:h.a.getInstance().state||(h.a.getInstance().state={}),h.a.getInstance().state.search=n;case 50:e.$router.replace("/menu");case 51:case"end":return t.stop()}}),t,null,[[11,17]])})))()}},mounted:function(){var e=this;this.$store.state.loading_mounted();var t=this;function n(e,t){return a.apply(this,arguments)}function a(){return(a=c()(o.a.mark((function e(n,a){var s,i,c,u,p,g,b,x,w,k,v;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g=function(e){e&&(console.log(e),t.$q.notify({message:e.message?e.message:e,timeout:2e3})),f.a.getInstance().setBearer(null),t.$store.commit("user",null),t.$q.platform.is.cordova||t.$store.commit("quitFromMenu",!0),h.a.getInstance().logout(),t.checkSearchString()},!n&&a){e.next=9;break}if(!n||"Token expired"===n||"Invalid hash"===n){e.next=7;break}return console.log(n),e.next=6,t.$q.dialog({message:n.message?n.message:n});case 6:"/login"===t.$route.path&&(f.a.getInstance().setBearer(null),t.$store.commit("user",null),t.$q.platform.is.cordova||t.$store.commit("quitFromMenu",!0),h.a.getInstance().logout());case 7:return t.checkSearchString(),e.abrupt("return");case 9:if(s=l.a.KJUR.jws.JWS.readSafeJSONString(l.a.b64utoutf8(localStorage.getItem("id_token").split(".")[1])),void 0===a.email&&void 0!==s.email&&(a.email=s.email),!window.AppVersion&&!t.$q.platform.is.electron){e.next=29;break}i=a["http://customautosys:auth0:com/client_metadata"].version.split("."),c=(window.AppVersion?window.AppVersion.version:window.require("electron").remote.app.getVersion()).split("."),u=0;case 15:if(!(u<Math.max(i.length,c.length))){e.next=29;break}if(i[u]=u<i.length?parseInt(i[u]):0,c[u]=u<c.length?parseInt(c[u]):0,i[u]!==c[u]){e.next=20;break}return e.abrupt("continue",26);case 20:if(!(c[u]>i[u])){e.next=22;break}return e.abrupt("break",29);case 22:return e.next=24,new Promise((function(e){return t.$q.dialog({message:"Please update this app before continuing."}).onOk(e).onCancel(e)}));case 24:return window.AppVersion?(cordova.plugins.market.open("com.customautosys.covidgame"),h.a.getInstance().logout(),navigator.app.exitApp()):((p=window.require("electron").remote).shell.openExternal("https://customautosys.com/products.html?covidgame"),p.app.quit()),e.abrupt("return");case 26:++u,e.next=15;break;case 29:return t.$store.commit("profile",a),f.a.getInstance().setBearer(localStorage.getItem("id_token")),b=null,e.prev=32,e.next=35,f.a.getInstance().readUser();case 35:b=e.sent,e.next=42;break;case 38:return e.prev=38,e.t0=e.catch(32),g(e.t0),e.abrupt("return");case 42:if(x=b&&b.data?b.data:null,"object"===r()(x)){e.next=46;break}return g(b),e.abrupt("return");case 46:if(!(Object.keys(x).length>0)){e.next=51;break}return t.$store.commit("user",x),t.$store.commit("bonusOxygen",x.oxygen),t.checkSearchString(),e.abrupt("return");case 51:return w={name:a.name},void 0!==a.email&&""!==a.email&&(w.contacts=[{value:a.email,isEmail:1}]),void 0!==a.phone_number&&""!==a.phone_number&&(Array.isArray(w.contacts)||(w.contacts=[]),w.contacts.push({value:a.phone_number,isEmail:0})),e.next=56,new Promise((function(e){return t.$q.dialog({message:"Do you consent to us contacting you at your provided email address and/or phone number for any purpose whatsoever (including sending you promotional materials and important updates)? You can change this setting later under Profile.",persistent:!0,ok:{glossy:!0,push:!0,noCaps:!0,label:"Yes",size:"lg"},cancel:{label:"No",dense:!0,outline:!0,noCaps:!0,size:"xs",color:"white",textColor:"white"}}).onOk((function(){return e(1)})).onCancel((function(){return e(0)}))}));case 56:if(w.contactConsent=e.sent,!a.picture){e.next=71;break}return e.prev=58,e.next=61,m.a.get(a.picture,{responseType:"blob"});case 61:return b=e.sent,e.next=64,d.a.readAsDataURL(b.data);case 64:"string"==typeof(k=e.sent)&&k.startsWith("data:")&&((v=k.indexOf("base64,"))<0?v=k.indexOf(";")+1:v+="base64,".length,w.picture=k.substring(v),w.pictureFileType=k.substring("data:".length,k.indexOf(";"))),e.next=71;break;case 68:e.prev=68,e.t1=e.catch(58),console.log(e.t1);case 71:return e.prev=71,e.next=74,f.a.getInstance().createUser(w);case 74:b=e.sent,e.next=81;break;case 77:return e.prev=77,e.t2=e.catch(71),g(e.t2),e.abrupt("return");case 81:if(b.data){e.next=84;break}return g(b),e.abrupt("return");case 84:w.id_user=b.data,t.$store.commit("user",w),t.checkSearchString();case 87:case"end":return e.stop()}}),e,null,[[32,38],[58,68],[71,77]])})))).apply(this,arguments)}h.a.getInstance().setHash(location.hash),location.hash="","/"===this.$route.path?(h.a.getInstance().state={search:location.search},window.plugins&&window.plugins.webintent&&window.plugins.webintent.onNewIntent((function(t){t&&t.startsWith("http")&&t.includes("?")&&(h.a.getInstance().state={search:t.substring(t.indexOf("?"))},e.checkSearchString())})),h.a.getInstance().checkSession(n)):(this.$store.commit("quitFromMenu",!0),h.a.getInstance().login(n))}},x=(n("96e8"),n("2877")),w=Object(x.a)(b,(function(){var e=this.$createElement,t=this._self._c||e;return t("q-page",{staticClass:"page"},[t("q-list",[t("q-item",[t("q-item-section",{staticClass:"items-center"},[t("img",{staticClass:"logo",attrs:{src:n("5f38")}})])],1),t("q-item",[t("q-item-section",{staticClass:"items-center"},[t("q-spinner-gears",{attrs:{size:"50px",color:"red-10"}})],1)],1),t("q-item",[t("q-item-section",{staticClass:"text-center text-red-4"},[this._v("\n\t\t\t\tLoading...\n\t\t\t")])],1)],1)],1)}),[],!1,null,"1a692212",null);t.default=w.exports}}]);